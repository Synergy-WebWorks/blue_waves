import{r as c,b as _}from"./app-BK6OWJZL.js";import{p as q}from"./use-disposables-CO8JALxK.js";import{l as F,o as W,a as g,O as U,U as w,y as P,b as G,s as J,u as H,d as E,C as T,I as N,n as X,c as Y,h as Z,T as z,e as d,r as ee,f as A,_ as te,M as Q,D as V,g as re}from"./keyboard-dDytMljD.js";import{T as ne}from"./use-resolve-button-type-CrZHGbJE.js";function B(e){return[e.screenX,e.screenY]}function ue(){let e=c.useRef([-1,-1]);return{wasMoved(u){let r=B(u);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(u){e.current=B(u)}}}function ae({container:e,accept:u,walk:r,enabled:n=!0}){let o=c.useRef(u),t=c.useRef(r);c.useEffect(()=>{o.current=u,t.current=r},[u,r]),F(()=>{if(!e||!n)return;let l=W(e);if(!l)return;let a=o.current,s=t.current,m=Object.assign(y=>a(y),{acceptNode:a}),v=l.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,m,!1);for(;v.nextNode();)s(v.currentNode)},[e,n,o,t])}function oe(e){throw new Error("Unexpected object: "+e)}var b=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(b||{});function le(e,u){let r=u.resolveItems();if(r.length<=0)return null;let n=u.resolveActiveIndex(),o=n??-1;switch(e.focus){case 0:{for(let t=0;t<r.length;++t)if(!u.resolveDisabled(r[t],t,r))return t;return n}case 1:{for(let t=o-1;t>=0;--t)if(!u.resolveDisabled(r[t],t,r))return t;return n}case 2:{for(let t=o+1;t<r.length;++t)if(!u.resolveDisabled(r[t],t,r))return t;return n}case 3:{for(let t=r.length-1;t>=0;--t)if(!u.resolveDisabled(r[t],t,r))return t;return n}case 4:{for(let t=0;t<r.length;++t)if(u.resolveId(r[t],t,r)===e.id)return t;return n}case 5:return null;default:oe(e)}}let K=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function j(e){var u,r;let n=(u=e.innerText)!=null?u:"",o=e.cloneNode(!0);if(!(o instanceof HTMLElement))return n;let t=!1;for(let a of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),t=!0;let l=t?(r=o.innerText)!=null?r:"":n;return K.test(l)&&(l=l.replace(K,"")),l}function ie(e){let u=e.getAttribute("aria-label");if(typeof u=="string")return u.trim();let r=e.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(o=>{let t=document.getElementById(o);if(t){let l=t.getAttribute("aria-label");return typeof l=="string"?l.trim():j(t).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return j(e).trim()}function se(e){let u=c.useRef(""),r=c.useRef("");return g(()=>{let n=e.current;if(!n)return"";let o=n.innerText;if(u.current===o)return r.current;let t=ie(n).trim().toLowerCase();return u.current=o,r.current=t,t})}var ce=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ce||{}),fe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(fe||{}),de=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(de||{});function k(e,u=r=>r){let r=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=re(u(e.items.slice()),t=>t.dataRef.current.domRef.current),o=r?n.indexOf(r):null;return o===-1&&(o=null),{items:n,activeItemIndex:o}}let me={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,u)=>{var r;let n=k(e),o=le(u,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:t=>t.id,resolveDisabled:t=>t.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:o,activationTrigger:(r=u.trigger)!=null?r:1}},3:(e,u)=>{let r=e.searchQuery!==""?0:1,n=e.searchQuery+u.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find(l=>{var a;return((a=l.dataRef.current.textValue)==null?void 0:a.startsWith(n))&&!l.dataRef.current.disabled}),t=o?e.items.indexOf(o):-1;return t===-1||t===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:t,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,u)=>{let r=k(e,n=>[...n,{id:u.id,dataRef:u.dataRef}]);return{...e,...r}},6:(e,u)=>{let r=k(e,n=>{let o=n.findIndex(t=>t.id===u.id);return o!==-1&&n.splice(o,1),n});return{...e,...r,activationTrigger:1}}},L=c.createContext(null);L.displayName="MenuContext";function $(e){let u=c.useContext(L);if(u===null){let r=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,$),r}return u}function pe(e,u){return H(u.type,me,e,u)}let ve=c.Fragment;function ge(e,u){let{__demoMode:r=!1,...n}=e,o=c.useReducer(pe,{__demoMode:r,menuState:r?0:1,buttonRef:c.createRef(),itemsRef:c.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:t,itemsRef:l,buttonRef:a},s]=o,m=P(u);G([a,l],(x,h)=>{var f;s({type:1}),Z(h,z.Loose)||(x.preventDefault(),(f=a.current)==null||f.focus())},t===0);let v=g(()=>{s({type:1})}),y=c.useMemo(()=>({open:t===0,close:v}),[t,v]),I={ref:m};return _.createElement(L.Provider,{value:o},_.createElement(J,{value:H(t,{0:E.Open,1:E.Closed})},T({ourProps:I,theirProps:n,slot:y,defaultTag:ve,name:"Menu"})))}let Ie="button";function be(e,u){var r;let n=N(),{id:o=`headlessui-menu-button-${n}`,...t}=e,[l,a]=$("Menu.Button"),s=P(l.buttonRef,u),m=q(),v=g(f=>{switch(f.key){case d.Space:case d.Enter:case d.ArrowDown:f.preventDefault(),f.stopPropagation(),a({type:0}),m.nextFrame(()=>a({type:2,focus:b.First}));break;case d.ArrowUp:f.preventDefault(),f.stopPropagation(),a({type:0}),m.nextFrame(()=>a({type:2,focus:b.Last}));break}}),y=g(f=>{switch(f.key){case d.Space:f.preventDefault();break}}),I=g(f=>{if(ee(f.currentTarget))return f.preventDefault();e.disabled||(l.menuState===0?(a({type:1}),m.nextFrame(()=>{var R;return(R=l.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})})):(f.preventDefault(),a({type:0})))}),x=c.useMemo(()=>({open:l.menuState===0}),[l]),h={ref:s,id:o,type:ne(e,l.buttonRef),"aria-haspopup":"menu","aria-controls":(r=l.itemsRef.current)==null?void 0:r.id,"aria-expanded":l.menuState===0,onKeyDown:v,onKeyUp:y,onClick:I};return T({ourProps:h,theirProps:t,slot:x,defaultTag:Ie,name:"Menu.Button"})}let ye="div",xe=U.RenderStrategy|U.Static;function Re(e,u){var r,n;let o=N(),{id:t=`headlessui-menu-items-${o}`,...l}=e,[a,s]=$("Menu.Items"),m=P(a.itemsRef,u),v=X(a.itemsRef),y=q(),I=Y(),x=I!==null?(I&E.Open)===E.Open:a.menuState===0;c.useEffect(()=>{let i=a.itemsRef.current;i&&a.menuState===0&&i!==(v==null?void 0:v.activeElement)&&i.focus({preventScroll:!0})},[a.menuState,a.itemsRef,v]),ae({container:a.itemsRef.current,enabled:a.menuState===0,accept(i){return i.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:i.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(i){i.setAttribute("role","none")}});let h=g(i=>{var S,M;switch(y.dispose(),i.key){case d.Space:if(a.searchQuery!=="")return i.preventDefault(),i.stopPropagation(),s({type:3,value:i.key});case d.Enter:if(i.preventDefault(),i.stopPropagation(),s({type:1}),a.activeItemIndex!==null){let{dataRef:p}=a.items[a.activeItemIndex];(M=(S=p.current)==null?void 0:S.domRef.current)==null||M.click()}V(a.buttonRef.current);break;case d.ArrowDown:return i.preventDefault(),i.stopPropagation(),s({type:2,focus:b.Next});case d.ArrowUp:return i.preventDefault(),i.stopPropagation(),s({type:2,focus:b.Previous});case d.Home:case d.PageUp:return i.preventDefault(),i.stopPropagation(),s({type:2,focus:b.First});case d.End:case d.PageDown:return i.preventDefault(),i.stopPropagation(),s({type:2,focus:b.Last});case d.Escape:i.preventDefault(),i.stopPropagation(),s({type:1}),A().nextFrame(()=>{var p;return(p=a.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})});break;case d.Tab:i.preventDefault(),i.stopPropagation(),s({type:1}),A().nextFrame(()=>{te(a.buttonRef.current,i.shiftKey?Q.Previous:Q.Next)});break;default:i.key.length===1&&(s({type:3,value:i.key}),y.setTimeout(()=>s({type:4}),350));break}}),f=g(i=>{switch(i.key){case d.Space:i.preventDefault();break}}),R=c.useMemo(()=>({open:a.menuState===0}),[a]),D={"aria-activedescendant":a.activeItemIndex===null||(r=a.items[a.activeItemIndex])==null?void 0:r.id,"aria-labelledby":(n=a.buttonRef.current)==null?void 0:n.id,id:t,onKeyDown:h,onKeyUp:f,role:"menu",tabIndex:0,ref:m};return T({ourProps:D,theirProps:l,slot:R,defaultTag:ye,features:xe,visible:x,name:"Menu.Items"})}let he=c.Fragment;function Se(e,u){let r=N(),{id:n=`headlessui-menu-item-${r}`,disabled:o=!1,...t}=e,[l,a]=$("Menu.Item"),s=l.activeItemIndex!==null?l.items[l.activeItemIndex].id===n:!1,m=c.useRef(null),v=P(u,m);F(()=>{if(l.__demoMode||l.menuState!==0||!s||l.activationTrigger===0)return;let p=A();return p.requestAnimationFrame(()=>{var C,O;(O=(C=m.current)==null?void 0:C.scrollIntoView)==null||O.call(C,{block:"nearest"})}),p.dispose},[l.__demoMode,m,s,l.menuState,l.activationTrigger,l.activeItemIndex]);let y=se(m),I=c.useRef({disabled:o,domRef:m,get textValue(){return y()}});F(()=>{I.current.disabled=o},[I,o]),F(()=>(a({type:5,id:n,dataRef:I}),()=>a({type:6,id:n})),[I,n]);let x=g(()=>{a({type:1})}),h=g(p=>{if(o)return p.preventDefault();a({type:1}),V(l.buttonRef.current)}),f=g(()=>{if(o)return a({type:2,focus:b.Nothing});a({type:2,focus:b.Specific,id:n})}),R=ue(),D=g(p=>R.update(p)),i=g(p=>{R.wasMoved(p)&&(o||s||a({type:2,focus:b.Specific,id:n,trigger:0}))}),S=g(p=>{R.wasMoved(p)&&(o||s&&a({type:2,focus:b.Nothing}))}),M=c.useMemo(()=>({active:s,disabled:o,close:x}),[s,o,x]);return T({ourProps:{id:n,ref:v,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:f,onPointerEnter:D,onMouseEnter:D,onPointerMove:i,onMouseMove:i,onPointerLeave:S,onMouseLeave:S},theirProps:t,slot:M,defaultTag:he,name:"Menu.Item"})}let De=w(ge),Me=w(be),Fe=w(Re),Ee=w(Se),ke=Object.assign(De,{Button:Me,Items:Fe,Item:Ee});function we({title:e,titleId:u,...r},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":u},r),e?c.createElement("title",{id:u},e):null,c.createElement("path",{fillRule:"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const Ae=c.forwardRef(we);export{Ae as F,ke as q};
