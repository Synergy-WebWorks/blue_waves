import{u as c,r as d,a as I,j as e,d as q,h as N,A as _,c as M}from"./app-BsyyMBFq.js";import{D as R}from"./index.esm-CZXDttL8.js";import B from"./booking-cart-component-D1zIQjji.js";import L from"./booking-guest-component-DPGp46et.js";import $ from"./add-order-section-C9jhHc6G.js";import v from"./view-rent-image-section-CY2FKP94.js";import"./dayjs.min-DqT7TRJ-.js";import"./index-Ds5Fx4Ls.js";import"./dialog-DCiulL6x.js";import"./use-disposables-Bz_5rOR8.js";import"./keyboard-BLNxF8Hf.js";import"./use-root-containers-wVGPAp2V.js";import"./popover-Dzm2Ou3G.js";import"./use-resolve-button-type-2VsgvVz9.js";import"./booking-info-thunk-Bp65F2XU.js";import"./booking-info-service-C1FVvQ0j.js";import"./index-C5MvOpiG.js";import"./useZIndex-CXj26rLZ.js";import"./useId-dEj-jWE0.js";import"./index-6Ymnxf33.js";import"./zoom-Clkpc_S9.js";import"./LeftOutlined-CIjcxmNz.js";import"./useLocale-lxkj_19Q.js";import"./ChevronRightIcon-B2b3lsMA.js";function me(){var u,y,j;const m=new Date;m.setMonth(m.getMonth()+1);const{rents:r}=c(t=>t.rent),{selected:w,search:s,customer:E}=c(t=>t.app),{activities:l}=c(t=>t.activities),D=window.location.pathname.split("/")[3];new URLSearchParams(window.location.search);const[n,x]=d.useState(()=>{var t;return((t=l==null?void 0:l.result)==null?void 0:t.reduce((a,i)=>(a[i.id]=i.quantity??0,a),{}))||{}});console.log("quantities",n);const o=((u=r==null?void 0:r.result)==null?void 0:u.filter(t=>t.type==="cottage"))||[],p=((y=r==null?void 0:r.result)==null?void 0:y.filter(t=>t.type==="room"))||[],h=I(),g=new Date;g.setHours(0,0,0,0);const[F,k]=d.useState(o.map(()=>0)),[Y,H]=d.useState(p.map(()=>0));d.useEffect(()=>{o&&k(new Array(o.length).fill(0))},[o.length]);function S(){_.visit(`/admin/reservation/${D}?start=${s==null?void 0:s.start}&end=${s==null?void 0:s.end}&adults=${s==null?void 0:s.adults}&children=${s==null?void 0:s.children}`)}console.log("quantities",n);function f(t){const a=[...w,t],i=Array.from(new Map(a.map(b=>[b.id,b])).values());h(M(i))}const A=t=>{x(a=>{var i;return{...a,[t.id]:{...t,quantity:(((i=a[t.id])==null?void 0:i.quantity)??0)+1}}})},C=t=>{x(a=>{var i;return{...a,[t.id]:{...t,quantity:Math.max((((i=a[t.id])==null?void 0:i.quantity)??0)-1,0)}}})};return e.jsx("div",{className:"bg-gray-50",children:e.jsx("div",{className:"mx-auto mb-8",children:e.jsx("div",{className:"lg:grid lg:grid-cols-1 lg:gap-x-12 xl:gap-x-16",children:e.jsx("div",{children:e.jsxs("div",{className:"mt-2 pt-1 pb-5",children:[e.jsxs("div",{className:" bg-gray-50 pt-5 pb-5 px-5 py-5 border-b border-gray-600",children:[e.jsx("h2",{className:"text-lg font-medium text-cyan-600",children:"Booking Details"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 sm:pl-0",children:"Activity Name"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Rate/Hour"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(j=l==null?void 0:l.result)==null?void 0:j.map(t=>{var a;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-3.5 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-0",children:t.name}),e.jsx("td",{className:"px-3 py-3.5 text-sm whitespace-nowrap text-gray-500",children:parseFloat(t.rate).toFixed(2)}),e.jsx("td",{className:"px-3 py-3.5 text-sm whitespace-nowrap text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(t),className:"px-3 py-1 bg-gray-200 text-gray-700 rounded",children:"-"}),e.jsx("input",{type:"text",value:((a=n==null?void 0:n[t.id])==null?void 0:a.quantity)??0,readOnly:!0,className:"w-20 text-center border border-gray-300 rounded"}),e.jsx("button",{onClick:()=>A(t),className:"px-3 py-1 bg-teal-600 text-white rounded",children:"+"})]})})]},t.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex w-full flex-col sm:flex-row sm:gap-4",children:[e.jsx(R,{className:"w-full",primaryColor:"teal",value:{startDate:s.start,endDate:s.end},onChange:t=>h(q({...s,start:N(t.startDate).format("LL"),end:N(t.endDate).format("LL")})),minDate:g,separator:"to",displayFormat:"MM/DD/YYYY",popoverDirection:"down",showShortcuts:!1,useRange:!1}),e.jsx(L,{})]}),e.jsx("button",{onClick:S,className:"w-full px-6 py-2 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition",children:"Search"})]}),e.jsxs("div",{className:"flex mt-5 justify-between items-center self-end",children:[e.jsx($,{quantities:n}),e.jsx(B,{})]})]})]}),e.jsxs("div",{className:`grid grid-cols-1 gap-y-4 sm:grid-cols-2 sm:gap-x-6 sm:gap-y-10 lg:grid-cols-2 lg:gap-x-8 mt-6 p-3 
                max-h-[600px] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 border-b border-gray-600`,children:[o.map((t,a)=>e.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-lg border border-gray-300 bg-white shadow-lg",children:[e.jsx("div",{className:"relative",children:e.jsx(v,{data:t})}),e.jsxs("div",{className:"flex flex-1 flex-col space-y-2 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.jsx("a",{href:t.href,children:t.name})}),e.jsxs("p",{className:"text-sm italic font-bold text-gray-500",children:["Price:"," ",parseInt(t.rate).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500 text-justify",children:t.description}),e.jsx("div",{className:"flex flex-1 flex-col justify-end",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-base font-medium text-cyan-800",children:t.price}),e.jsx("button",{onClick:()=>f(t),className:"ml-4 bg-orange-500 text-white hover:bg-orange-600 px-2 py-1 rounded-md",children:"Add to Booking"})]})})]})]},t.room_id)),p.map((t,a)=>e.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-lg border border-gray-300 bg-white shadow-lg",children:[e.jsx("div",{className:"relative",children:e.jsx(v,{data:t})}),e.jsxs("div",{className:"flex flex-1 flex-col space-y-2 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.jsx("a",{href:t.href,children:t.name})}),e.jsx("p",{className:"text-sm italic font-bold text-gray-500",children:t.options}),e.jsx("p",{className:"text-sm text-gray-500 text-justify",children:t.description}),e.jsx("div",{className:"flex flex-1 flex-col justify-end",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-base font-medium text-cyan-800",children:t.price}),e.jsx("button",{onClick:()=>f(t),className:"ml-4 bg-orange-500 text-white hover:bg-orange-600 px-2 py-1 rounded-md",children:"Add to Booking"})]})})]})]},t.cottage_id))]})]})})})})})}export{me as default};
