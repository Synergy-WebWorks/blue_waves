import{r as g,u as P,j as e,A as d,h as f,s as z}from"./app-RxJh6Szw.js";import B from"./first-form-section-uN8wd193.js";import D from"./second-form-section-BMsgOLvl.js";import{c as Y}from"./booking-info-thunk-DEE_Q4hA.js";import{F as A}from"./CheckIcon-DkUguW47.js";import"./index.esm-CEg6fdNr.js";import"./dayjs.min-BEwHCp_V.js";import"./booking-guest-component-BUaN3-Rw.js";import"./popover-BBP6GFMK.js";import"./use-root-containers-DbG0yKT8.js";import"./keyboard-CYdH7zwX.js";import"./use-resolve-button-type-Dq--R8Mb.js";import"./booking-cart-component-SIH5q_Ln.js";import"./index-CqLBHrQX.js";import"./dialog-CYVfcQz0.js";import"./use-disposables-CzL6DEft.js";import"./ChevronRightIcon-C6VmOISv.js";import"./TrashIcon-5IlUOhra.js";import"./booking-info-service-DYFl4tKN.js";function le(){const b=window.location.pathname.split("/")[3],[n,E]=g.useState(b?2:1),{selected:c,customer:a,search:r}=P(t=>t.app),[m,i]=g.useState(!1),l=[{id:"01",name:"Booking Order",description:"Completed"},{id:"02",name:"Confirm Booking",description:"Current"}],u=new URLSearchParams(window.location.search),j=u.get("start"),N=u.get("end");function o(...t){return t.filter(Boolean).join(" ")}const w=l.map((t,s)=>({...t,status:s+1<n?"complete":s+1===n?"current":"upcoming"}));console.log("dadwwawkdjlkjlawd",`/admin/booking/checkout?start=${r.start}&end=${r.end}&adults=${r.adults}&children=${r.children}`);const y=()=>{d.visit(`/admin/booking/checkout?start=${r.start}&end=${r.end}&adults=${r.adults}&children=${r.children}`)},v=()=>{d.visit(`/admin/booking?start=${r.start}&end=${r.end}&adults=${r.adults}&children=${r.children}`)},k=()=>{switch(n){case 1:return e.jsx(B,{});case 2:return e.jsx(D,{});default:return null}};function S(t,s){const R=new Date(t),x=(new Date(s)-R)/(1e3*60*60*24);return x==0?1:x}const p=S(r.start,r.end),h=c.reduce((t,s)=>t+Number(s.rate),0)*p,$=a.adults,C=a.children,F=parseInt(h)+a.children+a.adults,_=(parseInt(h)+a.children+a.adults)/2;async function L(t){i(!0);try{const s=f().format("MDDYYYYHHmmss");await z.dispatch(Y({...a,selected:c,reference_id:s,submitted_date:f().format("LLL"),start:j,end:N,adults:$,children:C,total:F,initial:_,status:"pending",processed_by:"admin",gap:p})),i(!1),d.visit("/admin/reservation")}catch{i(!1)}}return e.jsx("div",{children:e.jsxs("div",{className:"lg:border-b lg:border-t lg:border-gray-200 mt-5 mb-5",children:[e.jsx("nav",{"aria-label":"Progress",className:"",children:e.jsx("ol",{role:"list",className:"overflow-hidden rounded-md lg:flex lg:rounded-none lg:border-l lg:border-r lg:border-b lg:border-gray-200",children:w.map((t,s)=>e.jsxs("li",{className:"relative overflow-hidden lg:flex-1",children:[s>0&&e.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 left-0 top-0 hidden w-3 lg:block",children:e.jsx("svg",{fill:"none",viewBox:"0 0 12 82",preserveAspectRatio:"none",className:"size-full text-gray-300",children:e.jsx("path",{d:"M0.5 0V31L10.5 41L0.5 51V82",stroke:"currentColor",vectorEffect:"non-scaling-stroke"})})}),e.jsx("div",{className:o(s===0?"rounded-t-md border-b-0":"",s===l.length-1?"rounded-b-md border-t-0":"","overflow-hidden border  border-gray-200 lg:border-0"),children:e.jsx("button",{className:"group w-full text-left:",children:t.status==="complete"?e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-1 bg-transparent group-hover:bg-gray-200 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full"}),e.jsxs("span",{className:o(s!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"),children:[e.jsx("span",{className:"shrink-0",children:e.jsx("span",{className:"flex size-10 items-center justify-center rounded-full bg-cyan-600",children:e.jsx(A,{"aria-hidden":"true",className:"size-6 text-white"})})}),e.jsxs("span",{className:"ml-4 mt-0.5 flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:t.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Completed"})]})]})]}):t.status==="current"?e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-1 bg-cyan-600 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full"}),e.jsxs("span",{className:o(s!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"),children:[e.jsx("span",{className:"shrink-0",children:e.jsx("span",{className:"flex size-10 items-center justify-center rounded-full border-2 border-cyan-600",children:e.jsx("span",{className:"text-cyan-600",children:t.id})})}),e.jsxs("span",{className:"ml-4 mt-0.5 flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-cyan-600",children:t.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Current"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-1 bg-transparent group-hover:bg-gray-200 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full"}),e.jsxs("span",{className:o(s!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"),children:[e.jsx("span",{className:"shrink-0",children:e.jsx("span",{className:"flex size-10 items-center justify-center rounded-full border-2 border-gray-300",children:e.jsx("span",{className:"text-gray-500",children:t.id})})}),e.jsxs("span",{className:"ml-4 mt-0.5 flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:t.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Upcoming"})]})]})]})})})]},t.id))})}),e.jsx("div",{className:"mb-8 mt-4 p-4 rounded-lg shadow-md",children:k()}),e.jsxs("div",{className:"fixed bottom-0 mt-4 flex items-center justify-between w-[75vw] p-3",children:[e.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",disabled:n===1,children:"Previous"}),e.jsx("button",{onClick:n===l.length?()=>L():y,disabled:m,className:"px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:m?e.jsx(e.Fragment,{children:"Loading..."}):n===l.length?"Place Booking Request":"Proceed to Checkout"})]})]})})}export{le as default};
