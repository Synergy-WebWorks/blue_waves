import{r as c,a as _}from"./app-b4atmFuS.js";import{p as q}from"./use-disposables-DkMkfoxX.js";import{l as F,x as W,c as I,U as w,y as P,j as G,e as z,u as H,C as T,I as N,o as A,n as J,b as X,d as E,B as Y,z as Z,A as ee,k as f,r as te,O as U,_ as re,M as B,D as V}from"./keyboard-DqyqwOfi.js";import{T as ne}from"./use-resolve-button-type-DfajFJJX.js";function Q(e){return[e.screenX,e.screenY]}function ae(){let e=c.useRef([-1,-1]);return{wasMoved(a){let r=Q(a);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(a){e.current=Q(a)}}}function ue({container:e,accept:a,walk:r,enabled:n=!0}){let o=c.useRef(a),t=c.useRef(r);c.useEffect(()=>{o.current=a,t.current=r},[a,r]),F(()=>{if(!e||!n)return;let l=W(e);if(!l)return;let u=o.current,s=t.current,m=Object.assign(y=>u(y),{acceptNode:u}),v=l.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,m,!1);for(;v.nextNode();)s(v.currentNode)},[e,n,o,t])}function oe(e){throw new Error("Unexpected object: "+e)}var b=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(b||{});function le(e,a){let r=a.resolveItems();if(r.length<=0)return null;let n=a.resolveActiveIndex(),o=n??-1;switch(e.focus){case 0:{for(let t=0;t<r.length;++t)if(!a.resolveDisabled(r[t],t,r))return t;return n}case 1:{for(let t=o-1;t>=0;--t)if(!a.resolveDisabled(r[t],t,r))return t;return n}case 2:{for(let t=o+1;t<r.length;++t)if(!a.resolveDisabled(r[t],t,r))return t;return n}case 3:{for(let t=r.length-1;t>=0;--t)if(!a.resolveDisabled(r[t],t,r))return t;return n}case 4:{for(let t=0;t<r.length;++t)if(a.resolveId(r[t],t,r)===e.id)return t;return n}case 5:return null;default:oe(e)}}let j=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function K(e){var a,r;let n=(a=e.innerText)!=null?a:"",o=e.cloneNode(!0);if(!(o instanceof HTMLElement))return n;let t=!1;for(let u of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),t=!0;let l=t?(r=o.innerText)!=null?r:"":n;return j.test(l)&&(l=l.replace(j,"")),l}function ie(e){let a=e.getAttribute("aria-label");if(typeof a=="string")return a.trim();let r=e.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(o=>{let t=document.getElementById(o);if(t){let l=t.getAttribute("aria-label");return typeof l=="string"?l.trim():K(t).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return K(e).trim()}function se(e){let a=c.useRef(""),r=c.useRef("");return I(()=>{let n=e.current;if(!n)return"";let o=n.innerText;if(a.current===o)return r.current;let t=ie(n).trim().toLowerCase();return a.current=o,r.current=t,t})}var ce=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ce||{}),de=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(de||{}),fe=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(fe||{});function C(e,a=r=>r){let r=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=Y(a(e.items.slice()),t=>t.dataRef.current.domRef.current),o=r?n.indexOf(r):null;return o===-1&&(o=null),{items:n,activeItemIndex:o}}let me={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,a)=>{var r;let n=C(e),o=le(a,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:t=>t.id,resolveDisabled:t=>t.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:o,activationTrigger:(r=a.trigger)!=null?r:1}},3:(e,a)=>{let r=e.searchQuery!==""?0:1,n=e.searchQuery+a.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find(l=>{var u;return((u=l.dataRef.current.textValue)==null?void 0:u.startsWith(n))&&!l.dataRef.current.disabled}),t=o?e.items.indexOf(o):-1;return t===-1||t===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:t,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,a)=>{let r=C(e,n=>[...n,{id:a.id,dataRef:a.dataRef}]);return{...e,...r}},6:(e,a)=>{let r=C(e,n=>{let o=n.findIndex(t=>t.id===a.id);return o!==-1&&n.splice(o,1),n});return{...e,...r,activationTrigger:1}}},L=c.createContext(null);L.displayName="MenuContext";function $(e){let a=c.useContext(L);if(a===null){let r=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,$),r}return a}function pe(e,a){return H(a.type,me,e,a)}let ve=c.Fragment;function Ie(e,a){let{__demoMode:r=!1,...n}=e,o=c.useReducer(pe,{__demoMode:r,menuState:r?0:1,buttonRef:c.createRef(),itemsRef:c.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:t,itemsRef:l,buttonRef:u},s]=o,m=P(a);G([u,l],(x,h)=>{var d;s({type:1}),Z(h,ee.Loose)||(x.preventDefault(),(d=u.current)==null||d.focus())},t===0);let v=I(()=>{s({type:1})}),y=c.useMemo(()=>({open:t===0,close:v}),[t,v]),g={ref:m};return _.createElement(L.Provider,{value:o},_.createElement(z,{value:H(t,{0:E.Open,1:E.Closed})},T({ourProps:g,theirProps:n,slot:y,defaultTag:ve,name:"Menu"})))}let ge="button";function be(e,a){var r;let n=N(),{id:o=`headlessui-menu-button-${n}`,...t}=e,[l,u]=$("Menu.Button"),s=P(l.buttonRef,a),m=q(),v=I(d=>{switch(d.key){case f.Space:case f.Enter:case f.ArrowDown:d.preventDefault(),d.stopPropagation(),u({type:0}),m.nextFrame(()=>u({type:2,focus:b.First}));break;case f.ArrowUp:d.preventDefault(),d.stopPropagation(),u({type:0}),m.nextFrame(()=>u({type:2,focus:b.Last}));break}}),y=I(d=>{switch(d.key){case f.Space:d.preventDefault();break}}),g=I(d=>{if(te(d.currentTarget))return d.preventDefault();e.disabled||(l.menuState===0?(u({type:1}),m.nextFrame(()=>{var R;return(R=l.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})})):(d.preventDefault(),u({type:0})))}),x=c.useMemo(()=>({open:l.menuState===0}),[l]),h={ref:s,id:o,type:ne(e,l.buttonRef),"aria-haspopup":"menu","aria-controls":(r=l.itemsRef.current)==null?void 0:r.id,"aria-expanded":l.menuState===0,onKeyDown:v,onKeyUp:y,onClick:g};return T({ourProps:h,theirProps:t,slot:x,defaultTag:ge,name:"Menu.Button"})}let ye="div",xe=U.RenderStrategy|U.Static;function Re(e,a){var r,n;let o=N(),{id:t=`headlessui-menu-items-${o}`,...l}=e,[u,s]=$("Menu.Items"),m=P(u.itemsRef,a),v=J(u.itemsRef),y=q(),g=X(),x=g!==null?(g&E.Open)===E.Open:u.menuState===0;c.useEffect(()=>{let i=u.itemsRef.current;i&&u.menuState===0&&i!==(v==null?void 0:v.activeElement)&&i.focus({preventScroll:!0})},[u.menuState,u.itemsRef,v]),ue({container:u.itemsRef.current,enabled:u.menuState===0,accept(i){return i.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:i.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(i){i.setAttribute("role","none")}});let h=I(i=>{var S,M;switch(y.dispose(),i.key){case f.Space:if(u.searchQuery!=="")return i.preventDefault(),i.stopPropagation(),s({type:3,value:i.key});case f.Enter:if(i.preventDefault(),i.stopPropagation(),s({type:1}),u.activeItemIndex!==null){let{dataRef:p}=u.items[u.activeItemIndex];(M=(S=p.current)==null?void 0:S.domRef.current)==null||M.click()}V(u.buttonRef.current);break;case f.ArrowDown:return i.preventDefault(),i.stopPropagation(),s({type:2,focus:b.Next});case f.ArrowUp:return i.preventDefault(),i.stopPropagation(),s({type:2,focus:b.Previous});case f.Home:case f.PageUp:return i.preventDefault(),i.stopPropagation(),s({type:2,focus:b.First});case f.End:case f.PageDown:return i.preventDefault(),i.stopPropagation(),s({type:2,focus:b.Last});case f.Escape:i.preventDefault(),i.stopPropagation(),s({type:1}),A().nextFrame(()=>{var p;return(p=u.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})});break;case f.Tab:i.preventDefault(),i.stopPropagation(),s({type:1}),A().nextFrame(()=>{re(u.buttonRef.current,i.shiftKey?B.Previous:B.Next)});break;default:i.key.length===1&&(s({type:3,value:i.key}),y.setTimeout(()=>s({type:4}),350));break}}),d=I(i=>{switch(i.key){case f.Space:i.preventDefault();break}}),R=c.useMemo(()=>({open:u.menuState===0}),[u]),D={"aria-activedescendant":u.activeItemIndex===null||(r=u.items[u.activeItemIndex])==null?void 0:r.id,"aria-labelledby":(n=u.buttonRef.current)==null?void 0:n.id,id:t,onKeyDown:h,onKeyUp:d,role:"menu",tabIndex:0,ref:m};return T({ourProps:D,theirProps:l,slot:R,defaultTag:ye,features:xe,visible:x,name:"Menu.Items"})}let he=c.Fragment;function Se(e,a){let r=N(),{id:n=`headlessui-menu-item-${r}`,disabled:o=!1,...t}=e,[l,u]=$("Menu.Item"),s=l.activeItemIndex!==null?l.items[l.activeItemIndex].id===n:!1,m=c.useRef(null),v=P(a,m);F(()=>{if(l.__demoMode||l.menuState!==0||!s||l.activationTrigger===0)return;let p=A();return p.requestAnimationFrame(()=>{var k,O;(O=(k=m.current)==null?void 0:k.scrollIntoView)==null||O.call(k,{block:"nearest"})}),p.dispose},[l.__demoMode,m,s,l.menuState,l.activationTrigger,l.activeItemIndex]);let y=se(m),g=c.useRef({disabled:o,domRef:m,get textValue(){return y()}});F(()=>{g.current.disabled=o},[g,o]),F(()=>(u({type:5,id:n,dataRef:g}),()=>u({type:6,id:n})),[g,n]);let x=I(()=>{u({type:1})}),h=I(p=>{if(o)return p.preventDefault();u({type:1}),V(l.buttonRef.current)}),d=I(()=>{if(o)return u({type:2,focus:b.Nothing});u({type:2,focus:b.Specific,id:n})}),R=ae(),D=I(p=>R.update(p)),i=I(p=>{R.wasMoved(p)&&(o||s||u({type:2,focus:b.Specific,id:n,trigger:0}))}),S=I(p=>{R.wasMoved(p)&&(o||s&&u({type:2,focus:b.Nothing}))}),M=c.useMemo(()=>({active:s,disabled:o,close:x}),[s,o,x]);return T({ourProps:{id:n,ref:v,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:d,onPointerEnter:D,onMouseEnter:D,onPointerMove:i,onMouseMove:i,onPointerLeave:S,onMouseLeave:S},theirProps:t,slot:M,defaultTag:he,name:"Menu.Item"})}let De=w(Ie),Me=w(be),Fe=w(Re),Ee=w(Se),Ce=Object.assign(De,{Button:Me,Items:Fe,Item:Ee});function we({title:e,titleId:a,...r},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},r),e?c.createElement("title",{id:a},e):null,c.createElement("path",{fillRule:"evenodd",d:"M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const Ae=c.forwardRef(we);export{Ae as F,Ce as q};
