import{u as p,r as m,a as L,j as e,d as E,h as k,A as I,c as P}from"./app-DwllL515.js";import{D as Y}from"./index.esm-BCxhAoZD.js";import H from"./booking-cart-component-a0YQ0l1n.js";import O from"./booking-guest-component-Dhh2uGie.js";import T from"./add-order-section-D0ycQM44.js";import{F as D,a as C}from"./ChevronRightIcon-CxswMJhQ.js";import"./dayjs.min-BxIblytq.js";import"./index-bstsprrG.js";import"./dialog-C2YDfQEd.js";import"./use-disposables-Big5Q8Hl.js";import"./keyboard-DQAbSgoN.js";import"./use-root-containers-D5WCzTqt.js";import"./popover-NueF6wPC.js";import"./use-resolve-button-type-CdyI_ipS.js";import"./booking-info-thunk-BCAfapes.js";import"./booking-info-service-90xABFLK.js";function ie(){var N,v,w;const h=new Date;h.setMonth(h.getMonth()+1);const{rents:n}=p(t=>t.rent),{selected:S,search:r,customer:G}=p(t=>t.app),{activities:i}=p(t=>t.activities),A=window.location.pathname.split("/")[3];new URLSearchParams(window.location.search);const[d,g]=m.useState(()=>{var t;return((t=i==null?void 0:i.result)==null?void 0:t.reduce((s,a)=>(s[a.id]=a.quantity??0,s),{}))||{}});console.log("quantities",d);const o=((N=n==null?void 0:n.result)==null?void 0:N.filter(t=>t.type==="cottage"))||[],c=((v=n==null?void 0:n.result)==null?void 0:v.filter(t=>t.type==="room"))||[],u=L(),f=new Date;f.setHours(0,0,0,0);const[y,x]=m.useState(o.map(()=>0)),[Q,j]=m.useState(c.map(()=>0));m.useEffect(()=>{o&&x(new Array(o.length).fill(0))},[o.length]);const q=t=>{x(s=>s.map((a,l)=>l===t?(a+1)%o[l].uploads.length:a))},_=t=>{x(s=>s.map((a,l)=>l===t?(a-1+o[l].uploads.length)%o[l].uploads.length:a))},F=t=>{j(s=>s.map((a,l)=>l===t?(a+1)%c[l].images.length:a))},M=t=>{j(s=>s.map((a,l)=>l===t?(a-1+c[l].images.length)%c[l].images.length:a))};function R(){I.visit(`/admin/reservation/${A}?start=${r==null?void 0:r.start}&end=${r==null?void 0:r.end}&adults=${r==null?void 0:r.adults}&children=${r==null?void 0:r.children}`)}console.log("quantities",d);function b(t){const s=[...S,t],a=Array.from(new Map(s.map(l=>[l.id,l])).values());u(P(a))}const $=t=>{g(s=>{var a;return{...s,[t.id]:{...t,quantity:(((a=s[t.id])==null?void 0:a.quantity)??0)+1}}})},B=t=>{g(s=>{var a;return{...s,[t.id]:{...t,quantity:Math.max((((a=s[t.id])==null?void 0:a.quantity)??0)-1,0)}}})};return e.jsx("div",{className:"bg-gray-50",children:e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"lg:grid lg:grid-cols-1 lg:gap-x-12 xl:gap-x-16",children:e.jsx("div",{children:e.jsxs("div",{className:"mt-2 pt-1 pb-5",children:[e.jsxs("div",{className:" bg-gray-50 pt-5 pb-5 px-5 py-5 border-b border-gray-300",children:[e.jsx("h2",{className:"text-lg font-medium text-cyan-600",children:"Booking Details"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 sm:pl-0",children:"Activity Name"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Rate/Hour"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(w=i==null?void 0:i.result)==null?void 0:w.map(t=>{var s;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-3.5 text-sm font-medium whitespace-nowrap text-gray-900 sm:pl-0",children:t.name}),e.jsx("td",{className:"px-3 py-3.5 text-sm whitespace-nowrap text-gray-500",children:parseFloat(t.rate).toFixed(2)}),e.jsx("td",{className:"px-3 py-3.5 text-sm whitespace-nowrap text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>B(t),className:"px-3 py-1 bg-gray-200 text-gray-700 rounded",children:"-"}),e.jsx("input",{type:"text",value:((s=d==null?void 0:d[t.id])==null?void 0:s.quantity)??0,readOnly:!0,className:"w-20 text-center border border-gray-300 rounded"}),e.jsx("button",{onClick:()=>$(t),className:"px-3 py-1 bg-teal-600 text-white rounded",children:"+"})]})})]},t.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex w-full flex-col sm:flex-row sm:gap-4",children:[e.jsx(Y,{className:"w-full",primaryColor:"teal",value:{startDate:r.start,endDate:r.end},onChange:t=>u(E({...r,start:k(t.startDate).format("LL"),end:k(t.endDate).format("LL")})),minDate:f,separator:"to",displayFormat:"MM/DD/YYYY",popoverDirection:"down",showShortcuts:!1,useRange:!1}),e.jsx(O,{})]}),e.jsx("button",{onClick:R,className:"w-full px-6 py-2 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition",children:"Search"})]}),e.jsxs("div",{className:"flex mt-5 justify-between items-center self-end",children:[e.jsx(T,{quantities:d}),e.jsx(H,{})]})]})]}),e.jsxs("div",{className:"grid  grid-cols-1 gap-y-4 sm:grid-cols-2 sm:gap-x-6 sm:gap-y-10 lg:grid-cols-2 lg:gap-x-8 mt-6 p-3",children:[o.map((t,s)=>{var a;return e.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-lg border border-gray-300 bg-white shadow-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{alt:t.name,src:((a=t.uploads[y[s]])==null?void 0:a.file)??"/",className:"aspect-[3/4] w-full bg-gray-200 object-cover sm:aspect-auto sm:h-96"}),e.jsx("button",{className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-md hover:bg-gray-200 opacity-80",onClick:()=>_(s),children:e.jsx(D,{className:"h-6 w-6 text-gray-600"})}),e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-md hover:bg-gray-200 opacity-80",onClick:()=>q(s),children:e.jsx(C,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col space-y-2 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.jsx("a",{href:t.href,children:t.name})}),e.jsxs("p",{className:"text-sm italic font-bold text-gray-500",children:["Price:"," ",parseInt(t.rate).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500 text-justify",children:t.description}),e.jsx("div",{className:"flex flex-1 flex-col justify-end",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-base font-medium text-cyan-800",children:t.price}),e.jsx("button",{onClick:()=>b(t),className:"ml-4 bg-orange-500 text-white hover:bg-orange-600 px-2 py-1 rounded-md",children:"Add to Booking"})]})})]})]},t.room_id)}),c.map((t,s)=>{var a;return e.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-lg border border-gray-300 bg-white shadow-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{alt:t.name,src:((a=t.uploads[y[s]])==null?void 0:a.file)??"/",className:"aspect-[3/4] w-full bg-gray-200 object-cover sm:aspect-auto sm:h-96"}),e.jsx("button",{className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-md hover:bg-gray-200 opacity-80",onClick:()=>M(s),children:e.jsx(D,{className:"h-6 w-6 text-gray-600"})}),e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-md hover:bg-gray-200 opacity-80",onClick:()=>F(s),children:e.jsx(C,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col space-y-2 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.jsx("a",{href:t.href,children:t.name})}),e.jsx("p",{className:"text-sm italic font-bold text-gray-500",children:t.options}),e.jsx("p",{className:"text-sm text-gray-500 text-justify",children:t.description}),e.jsx("div",{className:"flex flex-1 flex-col justify-end",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-base font-medium text-cyan-800",children:t.price}),e.jsx("button",{onClick:()=>b(t),className:"ml-4 bg-orange-500 text-white hover:bg-orange-600 px-2 py-1 rounded-md",children:"Add to Booking"})]})})]})]},t.cottage_id)})]})]})})})})})}export{ie as default};
