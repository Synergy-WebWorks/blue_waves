import{u as g,r as a,j as e,s as m}from"./app-Cb_5-JKh.js";import{r as h,g as y}from"./inventory-thunk-iQUHyYGX.js";import{v}from"./index-C_1p0QRh.js";import{s as d}from"./index-wkR8OnuP.js";import{T as j}from"./index-DSDqe7BH.js";import{M as N}from"./index-BGMzLQMP.js";import"./useZIndex-DMrUngaR.js";import"./UnstableContext-t4sLRFzx.js";import"./asyncToGenerator-KMk13bt7.js";import"./index-BmHJuwrT.js";import"./useId-D3gjJ2i4.js";import"./colors-BgS6TA6Z.js";import"./zoom-CV01wxEY.js";import"./PurePanel-Bq9CwRXz.js";import"./index-DisE6-d-.js";import"./index-BE_GYMpC.js";import"./useLocale-CpAHsQMM.js";function B({data:l}){const{inventories:c}=g(r=>r.inventories),[p,s]=a.useState(!1),[t,o]=a.useState({}),[i,f]=d.useMessage();a.useEffect(()=>{o(l)},[l]);const x=async r=>{if(r.preventDefault(),!t.quantity||isNaN(t.quantity)||t.quantity<=0){i.error("Please enter a valid quantity");return}if(!t.received){i.error("Please select a valid received date");return}try{const n={...t,returned:t.quantity};if(!n.id){i.error("Item ID is missing!");return}await m.dispatch(h(n)),await m.dispatch(y()),d.success("Item Returned Successfully"),s(!1)}catch{i.error("Error returning item")}};console.log("inventories",c);const u=c.filter(r=>r.type==="Non-Consumable");return e.jsxs("div",{children:[f,e.jsx(j,{title:"Return Item(s)",children:e.jsxs("button",{type:"button",onClick:()=>s(!0),title:"Add Stocks",className:"relative inline-flex items-center rounded-lg bg-green-600 px-3 py-2 text-sm font-semibold text-gray-300 ring-1 ring-gray-300 ring-inset hover:bg-green-500 focus:z-10",children:[e.jsx(v,{}),"Â Return Item"]})}),e.jsx(N,{title:"Return Item",centered:!0,open:p,onCancel:()=>s(!1),footer:null,width:500,children:e.jsxs("form",{onSubmit:x,className:"w-full",children:[e.jsx("div",{className:"flex flex-wrap -mx-3",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block tracking-wide font-bold mb-1 mt-2",htmlFor:"itemName",children:"Name of Item"}),e.jsxs("select",{value:(t==null?void 0:t.id)||"",onChange:r=>{const n=u.find(b=>b.id===parseInt(r.target.value));o({...t,id:n==null?void 0:n.id,itemName:n==null?void 0:n.name})},name:"itemName",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Item"}),u.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]})}),e.jsx("div",{className:"flex flex-wrap -mx-3",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block tracking-wide font-bold mb-1 mt-2",htmlFor:"quantity",children:"Number of Returned Item(s)"}),e.jsx("input",{value:(t==null?void 0:t.quantity)||"",onChange:r=>o({...t,quantity:parseInt(r.target.value,10)||0}),name:"quantity",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"number"})]})}),e.jsx("div",{className:"flex flex-wrap -mx-3 mb-6",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block tracking-wide font-bold mb-1",htmlFor:"received",children:"Date Returned"}),e.jsx("input",{value:(t==null?void 0:t.received)||"",onChange:r=>o({...t,received:r.target.value}),name:"received",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"date"})]})}),e.jsxs("div",{className:"flex justify-end gap-1.5 mt-1",children:[e.jsx("button",{type:"button",className:"flex justify-end px-2 py-1.5 rounded-md hover:bg-gray-300",onClick:()=>s(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex justify-end bg-blue-600 px-2 py-1.5 rounded-md text-white hover:bg-blue-500",children:"Return Item(s)"})]})]})})]})}export{B as default};
