import{u as w,r as i,j as e,s as x}from"./app-HE9O2mox.js";import{c as k,g as C}from"./inventory-allocation-thunk-6TkxeKVB.js";import{a as _}from"./inventory-thunk-CTMY0OEG.js";import{F as g}from"./ArchiveBoxArrowDownIcon-BbgIn8Gc.js";import{F as S}from"./XMarkIcon-ld0SlFC1.js";import{s as b}from"./index-_jeM6wCy.js";import{_ as r}from"./dialog-CM6POUxQ.js";import"./useZIndex-DtX68ypP.js";import"./UnstableContext-B9cl1Vid.js";import"./asyncToGenerator-DaK4yumU.js";import"./use-disposables-DCrUra56.js";import"./keyboard-D_8-xoRJ.js";import"./use-root-containers-XzKLSR3X.js";function T({data:a,datas:R}){var f,y;const{rents:l}=w(s=>s.rent),[v,n]=i.useState(!1),[A,u]=i.useState(!1),[t,o]=i.useState({}),[c,m]=i.useState(""),h=window.location.pathname.split("/")[3],j=async s=>{if(s.preventDefault(),parseInt(t.quantity)>a.quantity){m("Quantity cannot exceed the available stock.");return}u(!0);try{await x.dispatch(k({...t,item_id:a==null?void 0:a.id})),x.dispatch(C(h)),x.dispatch(_(h)),b.success("Items Allocated Successfully"),n(!1)}catch{b.error("Failed to add items. Please try again.")}finally{u(!1)}},p=Array.isArray(l==null?void 0:l.result)?(f=l==null?void 0:l.result)==null?void 0:f.filter(s=>s.type==="room"):[],N=Array.isArray(l==null?void 0:l.result)?(y=l==null?void 0:l.result)==null?void 0:y.filter(s=>s.type==="cottage"):[];return console.log("fafaf",a),console.log("zxzadadaxz",p),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5 text-right",children:e.jsxs("button",{type:"button",onClick:()=>n(!0),className:"block rounded-md bg-cyan-700 px-3 py-2 text-center text-sm font-semibold text-white shadow-xs hover:bg-cyan-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600",children:[e.jsx(g,{className:"size-5 float-left mr-1"}),"Allocate Item(s)"]})}),e.jsxs(r,{open:v,onClose:n,className:"relative z-40",children:[e.jsx(r.Backdrop,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity duration-500 ease-in-out data-[closed]:opacity-0"}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:e.jsx(r.Panel,{transition:!0,className:"pointer-events-auto w-screen max-w-md transform transition duration-500 ease-in-out data-[closed]:translate-x-full sm:duration-700",children:e.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-cyan-600 py-6 shadow-xl",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs(r.Title,{className:"text-base font-semibold text-white",children:[e.jsx(g,{className:"size-5 float-left mr-1"}),"Allocate Item(s)"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>n(!1),className:"relative rounded-md text-gray-600 hover:text-white focus:outline-none",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(S,{"aria-hidden":"true",className:"size-6"})]})})]})}),e.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:e.jsxs("form",{action:"",onSubmit:j,children:[e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"sm:col-span-12",children:e.jsx("hr",{})}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("input",{onChange:s=>o({...t,name:s.target.value}),value:a==null?void 0:a.name,name:"name",type:"text",placeholder:"Name of the Item",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6",readOnly:!0})}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("input",{onChange:s=>o({...t,brand:s.target.value}),value:a==null?void 0:a.brand,name:"brand",type:"text",placeholder:"Name of the Brand",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6",readOnly:!0})}),e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx("input",{onChange:s=>{const d=s.target.value;o({...t,quantity:d}),parseInt(d)>(a==null?void 0:a.quantity)?m("Quantity cannot exceed the available stock."):m("")},value:t.quantity||"",name:"quantity",type:"number",placeholder:"Quantity",className:`block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6 ${c?"border-red-500":""}`}),c&&e.jsx("p",{className:" bg-white rounded-md text-red-500 text-sm",children:c})]}),e.jsx("div",{className:"w-full sm:col-span-12",children:e.jsx("label",{className:"text-white",children:" Select where to Allocate:"})}),e.jsxs("div",{className:"flex sm:col-span-12",children:[e.jsx("input",{onChange:s=>{o({...t,type:s.target.checked?"Room":"Cottage",cottage:!1,room:s.target.checked})},checked:t.type==="Room",type:"checkbox",name:"room",className:"w-4 mt-1 h-4 text-black bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),e.jsx("label",{className:"text-white",children:" Room"})]}),e.jsxs("div",{className:"flex sm:col-span-12",children:[e.jsx("input",{onChange:s=>{o({...t,type:s.target.checked?"Cottage":"Room",room:!1,cottage:s.target.checked})},checked:t.type==="Cottage",type:"checkbox",name:"cottage",className:"w-4 mt-1 h-4 text-black bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),e.jsx("label",{className:"text-white",children:" Cottage"})]}),t.type==="Room"&&e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx("label",{className:"text-white",children:" Select Room"}),e.jsxs("select",{onChange:s=>o({...t,allocation:s.target.value}),value:t.allocation,name:"room",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6",children:[e.jsx("option",{value:"",children:"Select a Room"}),p.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),t.type==="Cottage"&&e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx("label",{className:"text-white",children:" Select Cottage"}),e.jsxs("select",{onChange:s=>o({...t,allocation:s.target.value}),value:t.allocation,name:"cottage",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6",children:[e.jsx("option",{value:"",children:"Select a Cottage"}),N.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("hr",{})})]})}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:ring-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",className:"ml-4 inline-flex justify-center rounded-md bg-sky-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-sky-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500",children:"Save"})]})]})})]})})})})})]})]})}export{T as default};
