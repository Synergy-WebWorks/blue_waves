import{r,u as g,a as j,j as e,f as v,s as p}from"./app-LpQuIY55.js";import{x}from"./index-Doiac3Hh.js";import{c as N,g as w}from"./rent-thunk-CSd45t89.js";import k from"./upload-room-section-x6GO4mjZ.js";import{F as _}from"./XMarkIcon-CssVApDo.js";import{s as u}from"./index-B7IX2HrH.js";import{_ as n}from"./dialog-Czd81ogp.js";import"./PhotoIcon-CcwJBwx6.js";import"./useZIndex-DnQof6Zw.js";import"./UnstableContext-MzYyZc5U.js";import"./asyncToGenerator-B66g1DDZ.js";import"./use-disposables-BnTA9YSu.js";import"./keyboard-BqsIQCkl.js";import"./use-root-containers-57-xel5l.js";function O(){const[h,i]=r.useState(!1),[c,d]=r.useState(!1),[l,f]=r.useState(null),{rent:s}=g(a=>a.rents),y=j();function o(a){y(v({...s,[a.target.name]:a.target.value}))}async function b(a){a.preventDefault(),d(!0);const t=new FormData;t.append("rent_id",s.id??""),t.append("file_name",s.file_name??""),t.append("name",s.name??""),t.append("rate",s.rate??""),t.append("min_capacity",s.min_capacity??""),t.append("max_capacity",s.max_capacity??""),t.append("description",s.description??""),t.append("type","room"),t.append("status","Vacant"),l&&l.length>0&&Array.from(l).forEach(m=>{t.append("uploads[]",m)});try{await p.dispatch(N(t)),await p.dispatch(w()),u.success("Cottage successfully saved!"),i(!1)}catch{u.error("Failed to add Cottage. Please try again.")}finally{d(!1)}}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5 text-right",children:e.jsxs("button",{type:"button",onClick:()=>i(!0),className:"block rounded-md bg-sky-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-sky-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600",children:[e.jsx(x,{"aria-hidden":"true",className:"float-left mr-2 size-5"}),"Add Room(s)"]})}),e.jsxs(n,{open:h,onClose:i,className:"relative z-40",children:[e.jsx(n.Backdrop,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity duration-500 ease-in-out data-[closed]:opacity-0"}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:e.jsx(n.Panel,{transition:!0,className:"pointer-events-auto w-screen max-w-md transform transition duration-500 ease-in-out data-[closed]:translate-x-full sm:duration-700",children:e.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-cyan-600 py-6 shadow-xl",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs(n.Title,{className:"text-base font-semibold text-white",children:[e.jsx(x,{className:"size-5 float-left mr-2"})," ","New Room"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>i(!1),className:"relative rounded-md text-gray-600 hover:text-white focus:outline-none",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(_,{"aria-hidden":"true",className:"size-6"})]})})]})}),e.jsxs("form",{onSubmit:b,className:"relative mt-6 flex-1 px-4 sm:px-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx("hr",{}),e.jsx("h3",{className:"text-base font-medium text-white pt-3",children:"Room Information"})]}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("input",{onChange:o,value:(s==null?void 0:s.name)??"",name:"name",type:"text",placeholder:"Room Name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6"})}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("input",{onChange:o,value:(s==null?void 0:s.rate)??"",name:"rate",type:"number",placeholder:"Room Rate",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6"})}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("input",{onChange:o,value:(s==null?void 0:s.min_capacity)??"",name:"min_capacity",type:"number",placeholder:"Minimum Capacity",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6"})}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("input",{onChange:o,value:(s==null?void 0:s.max_capacity)??"",name:"max_capacity",type:"number",placeholder:"Maximum Capacity",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6"})}),e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx("hr",{}),e.jsx("h3",{className:"text-base font-medium text-white pt-3",children:"Room Description"})]}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("textarea",{name:"description",onChange:o,value:(s==null?void 0:s.description)??"",placeholder:"Room Description",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-sky-500 focus:border-sky-500 sm:text-sm/6"})}),e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx("hr",{}),e.jsx("h3",{className:"text-base font-medium text-white pt-3",children:"Upload Room Images"}),e.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-white bg-cyan-600 px-6 py-10",children:e.jsx("div",{className:"text-center",children:e.jsx(k,{files:l,setFiles:f})})})]})]})}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:ring-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"ml-4 inline-flex justify-center rounded-md bg-sky-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-sky-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500",children:c?"Saving...":"Save"})]})]})]})})})})})]})]})}export{O as default};
