import{r as n,k as y}from"./app-CswWQHRx.js";import{am as F,an as H,w as R,s as U,l as x,a8 as W,k as N,A as V,G,P as M,Z}from"./useZIndex-B2V6xeYq.js";import{i as J}from"./index-BhvH2U2b.js";import{d as K}from"./colors-DMjaLOsJ.js";import{g as Q}from"./UnstableContext-B649Qlls.js";const X=e=>{const{componentCls:o,colorPrimary:t}=e;return{[o]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${t})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},Y=F("Wave",e=>[X(e)]),T=`${H}-wave-target`;function g(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ee(e){const{borderTopColor:o,borderColor:t,backgroundColor:r}=getComputedStyle(e);return g(o)?o:g(t)?t:g(r)?r:null}function w(e){return Number.isNaN(e)?0:e}const te=e=>{const{className:o,target:t,component:r,registerUnmount:i}=e,c=n.useRef(null),l=n.useRef(null);n.useEffect(()=>{l.current=i()},[]);const[d,C]=n.useState(null),[f,s]=n.useState([]),[p,v]=n.useState(0),[$,k]=n.useState(0),[L,O]=n.useState(0),[A,q]=n.useState(0),[D,I]=n.useState(!1),S={left:p,top:$,width:L,height:A,borderRadius:f.map(u=>`${u}px`).join(" ")};d&&(S["--wave-color"]=d);function E(){const u=getComputedStyle(t);C(ee(t));const a=u.position==="static",{borderLeftWidth:m,borderTopWidth:b}=u;v(a?t.offsetLeft:w(-parseFloat(m))),k(a?t.offsetTop:w(-parseFloat(b))),O(t.offsetWidth),q(t.offsetHeight);const{borderTopLeftRadius:h,borderTopRightRadius:_,borderBottomLeftRadius:j,borderBottomRightRadius:z}=u;s([h,_,z,j].map(B=>w(parseFloat(B))))}if(n.useEffect(()=>{if(t){const u=R(()=>{E(),I(!0)});let a;return typeof ResizeObserver<"u"&&(a=new ResizeObserver(E),a.observe(t)),()=>{R.cancel(u),a==null||a.disconnect()}}},[]),!D)return null;const P=(r==="Checkbox"||r==="Radio")&&(t==null?void 0:t.classList.contains(T));return n.createElement(U,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(u,a)=>{var m,b;if(a.deadline||a.propertyName==="opacity"){const h=(m=c.current)===null||m===void 0?void 0:m.parentElement;(b=l.current)===null||b===void 0||b.call(l).then(()=>{h==null||h.remove()})}return!1}},(u,a)=>{let{className:m}=u;return n.createElement("div",{ref:W(c,a),className:x(o,m,{"wave-quick":P}),style:S})})},oe=(e,o)=>{var t;const{component:r}=o;if(r==="Checkbox"&&!(!((t=e.querySelector("input"))===null||t===void 0)&&t.checked))return;const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",e==null||e.insertBefore(i,e==null?void 0:e.firstChild);const c=Q();let l=null;function d(){return l}l=c(n.createElement(te,Object.assign({},o,{target:e,registerUnmount:d})),i)},ne=(e,o,t)=>{const{wave:r}=n.useContext(N),[,i,c]=V(),l=G(f=>{const s=e.current;if(r!=null&&r.disabled||!s)return;const p=s.querySelector(`.${T}`)||s,{showEffect:v}=r||{};(v||oe)(p,{className:o,token:i,component:t,event:f,hashId:c})}),d=n.useRef(null);return f=>{R.cancel(d.current),d.current=R(()=>{l(f)})}},le=e=>{const{children:o,disabled:t,component:r}=e,{getPrefixCls:i}=n.useContext(N),c=n.useRef(null),l=i("wave"),[,d]=Y(l),C=ne(c,x(l,d),r);if(y.useEffect(()=>{const s=c.current;if(!s||s.nodeType!==1||t)return;const p=v=>{!J(v.target)||!s.getAttribute||s.getAttribute("disabled")||s.disabled||s.className.includes("disabled")||s.className.includes("-leave")||C(v)};return s.addEventListener("click",p,!0),()=>{s.removeEventListener("click",p,!0)}},[t]),!y.isValidElement(o))return o??null;const f=M(o)?W(Z(o),c):c;return K(o,{ref:f})};export{T,le as W};
