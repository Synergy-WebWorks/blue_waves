import{r as o,u as Y,s as j,j as e,h as N,A as U}from"./app-D01WNnd1.js";import $ from"./book-first-form-section-DkpLhZD6.js";import M from"./book-second-form-section-bedj2lj0.js";import O from"./book-third-form-section-BpK8BNjd.js";import{c as T}from"./booking-info-thunk-C_mBmT0S.js";import{g as G}from"./term-thunk-DUIOLoN8.js";import{F as W}from"./CheckIcon-CXzPZYQY.js";import"./index.esm-Bd2_3CNK.js";import"./dayjs.min-C8ORuxwr.js";import"./booking-guest-component-D3ahFi8P.js";import"./popover-YaH5krY2.js";import"./use-root-containers-DfS0faRN.js";import"./keyboard-Bx7Ir6ts.js";import"./use-resolve-button-type-CehmJ53h.js";import"./booking-cart-component-C_UJQLEk.js";import"./index-2CK3DkvM.js";import"./dialog-C75knxsA.js";import"./use-disposables-CP16VRq2.js";import"./view-rent-image-section-CdOGoRqc.js";import"./index-D6dG4gmP.js";import"./useZIndex-DW4PzQhd.js";import"./useId-B3ZMtXeL.js";import"./index-Bdm5Nd5G.js";import"./zoom-wNhEwjES.js";import"./LeftOutlined-CazFaX-L.js";import"./useLocale-DBqKe3xI.js";import"./ChevronRightIcon-Bu3-cBvR.js";import"./TrashIcon-BS2iRvfI.js";import"./purify.es-DhD2mIk-.js";import"./booking-info-service-Dvzpz_Hj.js";function ke(){const[n,m]=o.useState(1),{selected:l,customer:r,search:u}=Y(t=>t.app),[p,c]=o.useState(!1),f=new URLSearchParams(window.location.search),y=f.get("start"),w=f.get("end"),[v,S]=o.useState(!1),a=[{id:"01",name:"Booking Order",description:"Completed"},{id:"02",name:"Confirm Booking",description:"Current"},{id:"03",name:"Terms & Condition",description:"Upcoming"}];function i(...t){return t.filter(Boolean).join(" ")}const k=1;o.useEffect(()=>{j.dispatch(G(k))},[]);const _=a.map((t,s)=>({...t,status:s+1<n?"complete":s+1===n?"current":"upcoming"})),C=()=>{n<a.length&&m(t=>t+1)},F=()=>{n>1&&m(t=>t-1)};function P(t,s){const V=new Date(t),b=(new Date(s)-V)/(1e3*60*60*24);return b==0?1:b}const h=P(u.start,u.end),g=l.reduce((t,s)=>t+Number(s.rate),0)*h,L=r.adults,B=r.children,E=parseInt(g)+r.children+r.adults,z=(parseInt(g)+r.children+r.adults)/2;async function D(t){c(!0);try{const s=N().format("MDDYYYYHHmmss");await j.dispatch(T({...r,selected:l,reference_id:s,submitted_date:N().format("LLL"),start:y,end:w,adults:L,children:B,total:E,initial:z,status:"pending",gap:h})),c(!1),U.visit(`/online-payment?reference_id=${s}`)}catch{c(!1)}}const R=()=>{switch(n){case 1:return e.jsx($,{});case 2:return e.jsx(M,{});case 3:return e.jsx(O,{setAccept:S});default:return null}};function A(t){return/^09\d{9}$/.test(t)}function H(t){return/\S+@\S+\.\S+/.test(t)}function d(t){return t==null||t==null||t==""}function x(t){if(l.length==0||p||!v&&n==3)return!0;if(l.length!==0&&n==2)if(H(r==null?void 0:r.email))if(A(r.mobile)){if(d(r==null?void 0:r.fname)||d(r==null?void 0:r.lname)||d(r==null?void 0:r.address))return!0}else return!0;else return!0;else return!1}return console.log("validation_function",l.length==0),e.jsx("div",{children:e.jsxs("div",{className:"lg:border-b lg:border-t lg:border-gray-200 mt-5 mb-5",children:[e.jsx("nav",{"aria-label":"Progress",className:"hidden lg:block",children:e.jsx("ol",{role:"list",className:"overflow-hidden rounded-md lg:flex lg:rounded-none lg:border-l lg:border-r lg:border-b lg:border-gray-200",children:_.map((t,s)=>e.jsxs("li",{className:"relative overflow-hidden lg:flex-1",children:[s>0&&e.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 left-0 top-0 hidden w-3 lg:block",children:e.jsx("svg",{fill:"none",viewBox:"0 0 12 82",preserveAspectRatio:"none",className:"size-full text-gray-300",children:e.jsx("path",{d:"M0.5 0V31L10.5 41L0.5 51V82",stroke:"currentColor",vectorEffect:"non-scaling-stroke"})})}),e.jsx("div",{className:i(s===0?"rounded-t-md border-b-0":"",s===a.length-1?"rounded-b-md border-t-0":"","overflow-hidden border  border-gray-200 lg:border-0"),children:e.jsx("button",{className:"group w-full text-left:",children:t.status==="complete"?e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-1 bg-transparent group-hover:bg-gray-200 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full"}),e.jsxs("span",{className:i(s!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"),children:[e.jsx("span",{className:"shrink-0",children:e.jsx("span",{className:"flex size-10 items-center justify-center rounded-full bg-cyan-600",children:e.jsx(W,{"aria-hidden":"true",className:"size-6 text-white"})})}),e.jsxs("span",{className:"ml-4 mt-0.5 flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:t.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Completed"})]})]})]}):t.status==="current"?e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-1 bg-cyan-600 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full"}),e.jsxs("span",{className:i(s!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"),children:[e.jsx("span",{className:"shrink-0",children:e.jsx("span",{className:"flex size-10 items-center justify-center rounded-full border-2 border-cyan-600",children:e.jsx("span",{className:"text-cyan-600",children:t.id})})}),e.jsxs("span",{className:"ml-4 mt-0.5 flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-cyan-600",children:t.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Current"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-1 bg-transparent group-hover:bg-gray-200 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full"}),e.jsxs("span",{className:i(s!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"),children:[e.jsx("span",{className:"shrink-0",children:e.jsx("span",{className:"flex size-10 items-center justify-center rounded-full border-2 border-gray-300",children:e.jsx("span",{className:"text-gray-500",children:t.id})})}),e.jsxs("span",{className:"ml-4 mt-0.5 flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:t.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Upcoming"})]})]})]})})})]},t.id))})}),e.jsx("div",{className:"mb-8 mt-4 p-4",children:R()}),e.jsxs("div",{className:"fixed bottom-0 mt-14 h-0 flex items-center justify-between w-full p-16",children:[e.jsx("button",{onClick:F,className:"px-6 py-2 bg-[rgba(45,55,72,0.6)] hover:bg-[rgba(45,55,72,0.8)] text-white rounded-md ",disabled:n===1,children:"Previous"}),e.jsx("button",{onClick:n===a.length?()=>D():C,disabled:x(),className:`px-6 py-2 text-white ${x()?"bg-[rgba(45,55,72,0.6)] text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}}  rounded-md `,children:p?e.jsx(e.Fragment,{children:"Loading..."}):n===a.length-1?"Proceed to Checkout":n===a.length?"Proceed to Online Payment":"Proceed"})]})]})})}export{ke as default};
