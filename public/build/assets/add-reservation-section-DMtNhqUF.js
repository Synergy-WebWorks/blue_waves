import{u as j,a as A,r as d,j as e,d as _,h as y,A as M,c as R}from"./app-DG2oocS5.js";import{D as $}from"./index.esm-Q3svrCAM.js";import B from"./booking-cart-component-D5PqIbrp.js";import F from"./booking-guest-component-BI1UXsHs.js";import L from"./add-order-section-BhyblzdM.js";import{F as b,a as N}from"./ChevronRightIcon-C6yU-zkg.js";import"./dayjs.min-DIIpBeVY.js";import"./index-CKj6FLov.js";import"./dialog-q-S0tmwK.js";import"./use-disposables-CFSAissK.js";import"./keyboard-C7My0wYo.js";import"./use-root-containers-BONcauBM.js";import"./popover-DrG60RYX.js";import"./use-resolve-button-type-BhqfN-ng.js";import"./booking-info-thunk-CEGj7rHe.js";import"./booking-info-service-YB4Bg_gL.js";function ee(){const m=new Date;m.setMonth(m.getMonth()+1);const{rents:n}=j(s=>s.rent),{selected:x,search:o,customer:E}=j(s=>s.app),v=window.location.pathname.split("/")[3];new URLSearchParams(window.location.search);const r=(n==null?void 0:n.filter(s=>s.type==="cottage"))||[],i=(n==null?void 0:n.filter(s=>s.type==="room"))||[],h=A(),p=new Date;p.setHours(0,0,0,0);const[g,c]=d.useState(r.map(()=>0)),[P,f]=d.useState(i.map(()=>0));d.useEffect(()=>{r&&c(new Array(r.length).fill(0))},[r.length]);const w=s=>{c(t=>t.map((a,l)=>l===s?(a+1)%r[l].uploads.length:a))},k=s=>{c(t=>t.map((a,l)=>l===s?(a-1+r[l].uploads.length)%r[l].uploads.length:a))},D=s=>{f(t=>t.map((a,l)=>l===s?(a+1)%i[l].images.length:a))},C=s=>{f(t=>t.map((a,l)=>l===s?(a-1+i[l].images.length)%i[l].images.length:a))};function S(){M.visit(`/admin/reservation/${v}?start=${o.start}&end=${o.end}&adults=${o.adults}&children=${o.children}`)}console.log("selected",x);function u(s){const t=[...x,s],a=Array.from(new Map(t.map(l=>[l.id,l])).values());h(R(a))}return e.jsx("div",{className:"bg-gray-50",children:e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"lg:grid lg:grid-cols-1 lg:gap-x-12 xl:gap-x-16",children:e.jsx("div",{children:e.jsxs("div",{className:"mt-2 pt-1 pb-5",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-gray-50 pt-5 pb-5 px-5 py-5 border-b border-gray-300",children:[e.jsx("h2",{className:"text-lg font-medium text-cyan-600",children:"Booking Details"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex w-full flex-col sm:flex-row sm:gap-4",children:[e.jsx($,{className:"w-full",primaryColor:"teal",value:{startDate:o.start,endDate:o.end},onChange:s=>h(_({...o,start:y(s.startDate).format("LL"),end:y(s.endDate).format("LL")})),minDate:p,separator:"to",displayFormat:"MM/DD/YYYY",popoverDirection:"down",showShortcuts:!1,useRange:!1}),e.jsx(F,{})]}),e.jsx("button",{onClick:S,className:"w-full px-6 py-2 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition",children:"Search"})]}),e.jsxs("div",{className:"flex mt-5 justify-between items-center self-end",children:[e.jsx(L,{}),e.jsx(B,{})]})]})]}),e.jsxs("div",{className:"grid  grid-cols-1 gap-y-4 sm:grid-cols-2 sm:gap-x-6 sm:gap-y-10 lg:grid-cols-2 lg:gap-x-8 mt-6 p-3",children:[r.map((s,t)=>{var a;return e.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-lg border border-gray-300 bg-white shadow-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{alt:s.name,src:((a=s.uploads[g[t]])==null?void 0:a.file)??"/",className:"aspect-[3/4] w-full bg-gray-200 object-cover sm:aspect-auto sm:h-96"}),e.jsx("button",{className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-md hover:bg-gray-200 opacity-80",onClick:()=>k(t),children:e.jsx(b,{className:"h-6 w-6 text-gray-600"})}),e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-md hover:bg-gray-200 opacity-80",onClick:()=>w(t),children:e.jsx(N,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col space-y-2 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.jsx("a",{href:s.href,children:s.name})}),e.jsxs("p",{className:"text-sm italic font-bold text-gray-500",children:["Price:  ",parseInt(s.rate).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500 text-justify",children:s.description}),e.jsx("div",{className:"flex flex-1 flex-col justify-end",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-base font-medium text-cyan-800",children:s.price}),e.jsx("button",{onClick:()=>u(s),className:"ml-4 bg-orange-500 text-white hover:bg-orange-600 px-2 py-1 rounded-md",children:"Add to Booking"})]})})]})]},s.room_id)}),i.map((s,t)=>{var a;return e.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-lg border border-gray-300 bg-white shadow-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{alt:s.name,src:((a=s.uploads[g[t]])==null?void 0:a.file)??"/",className:"aspect-[3/4] w-full bg-gray-200 object-cover sm:aspect-auto sm:h-96"}),e.jsx("button",{className:"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-md hover:bg-gray-200 opacity-80",onClick:()=>C(t),children:e.jsx(b,{className:"h-6 w-6 text-gray-600"})}),e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-300 p-2 rounded-full shadow-md hover:bg-gray-200 opacity-80",onClick:()=>D(t),children:e.jsx(N,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("div",{className:"flex flex-1 flex-col space-y-2 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.jsx("a",{href:s.href,children:s.name})}),e.jsx("p",{className:"text-sm italic font-bold text-gray-500",children:s.options}),e.jsx("p",{className:"text-sm text-gray-500 text-justify",children:s.description}),e.jsx("div",{className:"flex flex-1 flex-col justify-end",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-base font-medium text-cyan-800",children:s.price}),e.jsx("button",{onClick:()=>u(s),className:"ml-4 bg-orange-500 text-white hover:bg-orange-600 px-2 py-1 rounded-md",children:"Add to Booking"})]})})]})]},s.cottage_id)})]})]})})})})})}export{ee as default};
