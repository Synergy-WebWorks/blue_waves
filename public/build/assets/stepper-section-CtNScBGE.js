import{r as i,u as A,s as b,j as e,h as j,A as E}from"./app-TaWNkeRh.js";import Y from"./book-first-form-section-xjnClC3h.js";import H from"./book-second-form-section-B_mjxcgb.js";import U from"./book-third-form-section-Cj_6oYIa.js";import{c as M}from"./booking-info-thunk-COZVX6dR.js";import{g as O}from"./term-thunk-DxCSNKmR.js";import{F as T}from"./CheckIcon-B_w3KFrz.js";import"./index.esm-DngrIHlf.js";import"./dayjs.min-jrckUaoh.js";import"./booking-guest-component-dTjFVaif.js";import"./popover-LZdy3WnK.js";import"./use-root-containers-CNa5TjHv.js";import"./keyboard-ClOlTadb.js";import"./use-resolve-button-type-B5vH6yKq.js";import"./booking-cart-component-Cm3PNJt7.js";import"./index-By2w5D8j.js";import"./dialog-CR8CvsPg.js";import"./use-disposables-CQ5JBajL.js";import"./view-rent-image-section-zyWA1fha.js";import"./index-vTln2kPZ.js";import"./useZIndex-DogNr-2j.js";import"./useId-D9E8VlS9.js";import"./index-BqLe4Y4H.js";import"./zoom-zEnhxzNZ.js";import"./LeftOutlined-8J3Qcr72.js";import"./useLocale-CNelusAa.js";import"./ChevronRightIcon-D_TswxYL.js";import"./TrashIcon-DcV99RU3.js";import"./purify.es-DhD2mIk-.js";import"./booking-info-service-CCn--gbP.js";function ye(){const[r,d]=i.useState(1),{selected:o,customer:a,search:p}=A(t=>t.app),[c,m]=i.useState(!1),u=new URLSearchParams(window.location.search),N=u.get("start"),y=u.get("end"),[h,w]=i.useState(!1),n=[{id:"01",name:"Booking Order",description:"Completed"},{id:"02",name:"Confirm Booking",description:"Current"},{id:"03",name:"Terms & Condition",description:"Upcoming"}];function l(...t){return t.filter(Boolean).join(" ")}const v=1;i.useEffect(()=>{b.dispatch(O(v))},[]);const k=n.map((t,s)=>({...t,status:s+1<r?"complete":s+1===r?"current":"upcoming"})),S=()=>{r<n.length&&d(t=>t+1)},_=()=>{r>1&&d(t=>t-1)};function C(t,s){const R=new Date(t),f=(new Date(s)-R)/(1e3*60*60*24);return f==0?1:f}const g=C(p.start,p.end),x=o.reduce((t,s)=>t+Number(s.rate),0)*g,F=a.adults,L=a.children,P=parseInt(x)+a.children+a.adults,B=(parseInt(x)+a.children+a.adults)/2;async function z(t){m(!0);try{const s=j().format("MDDYYYYHHmmss");await b.dispatch(M({...a,selected:o,reference_id:s,submitted_date:j().format("LLL"),start:N,end:y,adults:F,children:L,total:P,initial:B,status:"pending",gap:g})),m(!1),E.visit(`/online-payment?reference_id=${s}`)}catch{m(!1)}}const D=()=>{switch(r){case 1:return e.jsx(Y,{});case 2:return e.jsx(H,{});case 3:return e.jsx(U,{setAccept:w});default:return null}};return e.jsx("div",{children:e.jsxs("div",{className:"lg:border-b lg:border-t lg:border-gray-200 mt-5 mb-5",children:[e.jsx("nav",{"aria-label":"Progress",className:"hidden lg:block",children:e.jsx("ol",{role:"list",className:"overflow-hidden rounded-md lg:flex lg:rounded-none lg:border-l lg:border-r lg:border-b lg:border-gray-200",children:k.map((t,s)=>e.jsxs("li",{className:"relative overflow-hidden lg:flex-1",children:[s>0&&e.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 left-0 top-0 hidden w-3 lg:block",children:e.jsx("svg",{fill:"none",viewBox:"0 0 12 82",preserveAspectRatio:"none",className:"size-full text-gray-300",children:e.jsx("path",{d:"M0.5 0V31L10.5 41L0.5 51V82",stroke:"currentColor",vectorEffect:"non-scaling-stroke"})})}),e.jsx("div",{className:l(s===0?"rounded-t-md border-b-0":"",s===n.length-1?"rounded-b-md border-t-0":"","overflow-hidden border  border-gray-200 lg:border-0"),children:e.jsx("button",{className:"group w-full text-left:",children:t.status==="complete"?e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-1 bg-transparent group-hover:bg-gray-200 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full"}),e.jsxs("span",{className:l(s!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"),children:[e.jsx("span",{className:"shrink-0",children:e.jsx("span",{className:"flex size-10 items-center justify-center rounded-full bg-cyan-600",children:e.jsx(T,{"aria-hidden":"true",className:"size-6 text-white"})})}),e.jsxs("span",{className:"ml-4 mt-0.5 flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:t.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Completed"})]})]})]}):t.status==="current"?e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-1 bg-cyan-600 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full"}),e.jsxs("span",{className:l(s!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"),children:[e.jsx("span",{className:"shrink-0",children:e.jsx("span",{className:"flex size-10 items-center justify-center rounded-full border-2 border-cyan-600",children:e.jsx("span",{className:"text-cyan-600",children:t.id})})}),e.jsxs("span",{className:"ml-4 mt-0.5 flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-cyan-600",children:t.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Current"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-1 bg-transparent group-hover:bg-gray-200 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full"}),e.jsxs("span",{className:l(s!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"),children:[e.jsx("span",{className:"shrink-0",children:e.jsx("span",{className:"flex size-10 items-center justify-center rounded-full border-2 border-gray-300",children:e.jsx("span",{className:"text-gray-500",children:t.id})})}),e.jsxs("span",{className:"ml-4 mt-0.5 flex min-w-0 flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:t.name}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Upcoming"})]})]})]})})})]},t.id))})}),e.jsx("div",{className:"mb-8 mt-4 p-4",children:D()}),e.jsxs("div",{className:"fixed bottom-0 mt-14 h-0 flex items-center justify-between w-full p-16",children:[e.jsx("button",{onClick:_,className:"px-6 py-2 bg-[rgba(45,55,72,0.6)] hover:bg-[rgba(45,55,72,0.8)] text-white rounded-md ",disabled:r===1,children:"Previous"}),e.jsx("button",{onClick:r===n.length?()=>z():S,disabled:o.length==0||c||!h&&r==3,className:`px-6 py-2 text-white ${o.length==0||c||!h&&r==3?"bg-[rgba(45,55,72,0.6)] hover:bg-[rgba(45,55,72,0.8)] text-white":"bg-cyan-600 hover:bg-cyan-700 text-white"}}  rounded-md `,children:c?e.jsx(e.Fragment,{children:"Loading..."}):r===n.length-1?"Proceed to Checkout":r===n.length?"Proceed to Online Payment":"Proceed"})]})]})})}export{ye as default};
