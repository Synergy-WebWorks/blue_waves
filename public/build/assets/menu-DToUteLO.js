import{r as c,R as _}from"./app-Ca8T-ViA.js";import{l as S,o as G,a as I,O as U,U as T,y as E,b as J,s as X,u as H,d as P,C as w,I as N,p as V,n as Y,c as z,h as Z,T as ee,e as d,r as te,f as A,_ as re,M as Q,D as W,g as ne}from"./keyboard-BHFsZHiO.js";function B(e){var n;if(e.type)return e.type;let t=(n=e.as)!=null?n:"button";if(typeof t=="string"&&t.toLowerCase()==="button")return"button"}function ue(e,n){let[t,u]=c.useState(()=>B(e));return S(()=>{u(B(e))},[e.type,e.as]),S(()=>{t||n.current&&n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&u("button")},[t,n]),t}function K(e){return[e.screenX,e.screenY]}function ae(){let e=c.useRef([-1,-1]);return{wasMoved(n){let t=K(n);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(n){e.current=K(n)}}}function oe({container:e,accept:n,walk:t,enabled:u=!0}){let o=c.useRef(n),r=c.useRef(t);c.useEffect(()=>{o.current=n,r.current=t},[n,t]),S(()=>{if(!e||!u)return;let i=G(e);if(!i)return;let a=o.current,s=r.current,m=Object.assign(y=>a(y),{acceptNode:a}),v=i.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,m,!1);for(;v.nextNode();)s(v.currentNode)},[e,u,o,r])}function ie(e){throw new Error("Unexpected object: "+e)}var b=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(b||{});function le(e,n){let t=n.resolveItems();if(t.length<=0)return null;let u=n.resolveActiveIndex(),o=u??-1;switch(e.focus){case 0:{for(let r=0;r<t.length;++r)if(!n.resolveDisabled(t[r],r,t))return r;return u}case 1:{for(let r=o-1;r>=0;--r)if(!n.resolveDisabled(t[r],r,t))return r;return u}case 2:{for(let r=o+1;r<t.length;++r)if(!n.resolveDisabled(t[r],r,t))return r;return u}case 3:{for(let r=t.length-1;r>=0;--r)if(!n.resolveDisabled(t[r],r,t))return r;return u}case 4:{for(let r=0;r<t.length;++r)if(n.resolveId(t[r],r,t)===e.id)return r;return u}case 5:return null;default:ie(e)}}let j=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function q(e){var n,t;let u=(n=e.innerText)!=null?n:"",o=e.cloneNode(!0);if(!(o instanceof HTMLElement))return u;let r=!1;for(let a of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),r=!0;let i=r?(t=o.innerText)!=null?t:"":u;return j.test(i)&&(i=i.replace(j,"")),i}function se(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let t=e.getAttribute("aria-labelledby");if(t){let u=t.split(" ").map(o=>{let r=document.getElementById(o);if(r){let i=r.getAttribute("aria-label");return typeof i=="string"?i.trim():q(r).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(", ")}return q(e).trim()}function ce(e){let n=c.useRef(""),t=c.useRef("");return I(()=>{let u=e.current;if(!u)return"";let o=u.innerText;if(n.current===o)return t.current;let r=se(u).trim().toLowerCase();return n.current=o,t.current=r,r})}var fe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(fe||{}),de=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(de||{}),me=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(me||{});function C(e,n=t=>t){let t=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,u=ne(n(e.items.slice()),r=>r.dataRef.current.domRef.current),o=t?u.indexOf(t):null;return o===-1&&(o=null),{items:u,activeItemIndex:o}}let pe={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,n)=>{var t;let u=C(e),o=le(n,{resolveItems:()=>u.items,resolveActiveIndex:()=>u.activeItemIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled});return{...e,...u,searchQuery:"",activeItemIndex:o,activationTrigger:(t=n.trigger)!=null?t:1}},3:(e,n)=>{let t=e.searchQuery!==""?0:1,u=e.searchQuery+n.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+t).concat(e.items.slice(0,e.activeItemIndex+t)):e.items).find(i=>{var a;return((a=i.dataRef.current.textValue)==null?void 0:a.startsWith(u))&&!i.dataRef.current.disabled}),r=o?e.items.indexOf(o):-1;return r===-1||r===e.activeItemIndex?{...e,searchQuery:u}:{...e,searchQuery:u,activeItemIndex:r,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,n)=>{let t=C(e,u=>[...u,{id:n.id,dataRef:n.dataRef}]);return{...e,...t}},6:(e,n)=>{let t=C(e,u=>{let o=u.findIndex(r=>r.id===n.id);return o!==-1&&u.splice(o,1),u});return{...e,...t,activationTrigger:1}}},L=c.createContext(null);L.displayName="MenuContext";function $(e){let n=c.useContext(L);if(n===null){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,$),t}return n}function ve(e,n){return H(n.type,pe,e,n)}let Ie=c.Fragment;function ge(e,n){let{__demoMode:t=!1,...u}=e,o=c.useReducer(ve,{__demoMode:t,menuState:t?0:1,buttonRef:c.createRef(),itemsRef:c.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsRef:i,buttonRef:a},s]=o,m=E(n);J([a,i],(x,h)=>{var f;s({type:1}),Z(h,ee.Loose)||(x.preventDefault(),(f=a.current)==null||f.focus())},r===0);let v=I(()=>{s({type:1})}),y=c.useMemo(()=>({open:r===0,close:v}),[r,v]),g={ref:m};return _.createElement(L.Provider,{value:o},_.createElement(X,{value:H(r,{0:P.Open,1:P.Closed})},w({ourProps:g,theirProps:u,slot:y,defaultTag:Ie,name:"Menu"})))}let be="button";function ye(e,n){var t;let u=N(),{id:o=`headlessui-menu-button-${u}`,...r}=e,[i,a]=$("Menu.Button"),s=E(i.buttonRef,n),m=V(),v=I(f=>{switch(f.key){case d.Space:case d.Enter:case d.ArrowDown:f.preventDefault(),f.stopPropagation(),a({type:0}),m.nextFrame(()=>a({type:2,focus:b.First}));break;case d.ArrowUp:f.preventDefault(),f.stopPropagation(),a({type:0}),m.nextFrame(()=>a({type:2,focus:b.Last}));break}}),y=I(f=>{switch(f.key){case d.Space:f.preventDefault();break}}),g=I(f=>{if(te(f.currentTarget))return f.preventDefault();e.disabled||(i.menuState===0?(a({type:1}),m.nextFrame(()=>{var R;return(R=i.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})})):(f.preventDefault(),a({type:0})))}),x=c.useMemo(()=>({open:i.menuState===0}),[i]),h={ref:s,id:o,type:ue(e,i.buttonRef),"aria-haspopup":"menu","aria-controls":(t=i.itemsRef.current)==null?void 0:t.id,"aria-expanded":i.menuState===0,onKeyDown:v,onKeyUp:y,onClick:g};return w({ourProps:h,theirProps:r,slot:x,defaultTag:be,name:"Menu.Button"})}let xe="div",Re=U.RenderStrategy|U.Static;function he(e,n){var t,u;let o=N(),{id:r=`headlessui-menu-items-${o}`,...i}=e,[a,s]=$("Menu.Items"),m=E(a.itemsRef,n),v=Y(a.itemsRef),y=V(),g=z(),x=g!==null?(g&P.Open)===P.Open:a.menuState===0;c.useEffect(()=>{let l=a.itemsRef.current;l&&a.menuState===0&&l!==(v==null?void 0:v.activeElement)&&l.focus({preventScroll:!0})},[a.menuState,a.itemsRef,v]),oe({container:a.itemsRef.current,enabled:a.menuState===0,accept(l){return l.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let h=I(l=>{var D,F;switch(y.dispose(),l.key){case d.Space:if(a.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),s({type:3,value:l.key});case d.Enter:if(l.preventDefault(),l.stopPropagation(),s({type:1}),a.activeItemIndex!==null){let{dataRef:p}=a.items[a.activeItemIndex];(F=(D=p.current)==null?void 0:D.domRef.current)==null||F.click()}W(a.buttonRef.current);break;case d.ArrowDown:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Next});case d.ArrowUp:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Previous});case d.Home:case d.PageUp:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.First});case d.End:case d.PageDown:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Last});case d.Escape:l.preventDefault(),l.stopPropagation(),s({type:1}),A().nextFrame(()=>{var p;return(p=a.buttonRef.current)==null?void 0:p.focus({preventScroll:!0})});break;case d.Tab:l.preventDefault(),l.stopPropagation(),s({type:1}),A().nextFrame(()=>{re(a.buttonRef.current,l.shiftKey?Q.Previous:Q.Next)});break;default:l.key.length===1&&(s({type:3,value:l.key}),y.setTimeout(()=>s({type:4}),350));break}}),f=I(l=>{switch(l.key){case d.Space:l.preventDefault();break}}),R=c.useMemo(()=>({open:a.menuState===0}),[a]),M={"aria-activedescendant":a.activeItemIndex===null||(t=a.items[a.activeItemIndex])==null?void 0:t.id,"aria-labelledby":(u=a.buttonRef.current)==null?void 0:u.id,id:r,onKeyDown:h,onKeyUp:f,role:"menu",tabIndex:0,ref:m};return w({ourProps:M,theirProps:i,slot:R,defaultTag:xe,features:Re,visible:x,name:"Menu.Items"})}let Se=c.Fragment;function De(e,n){let t=N(),{id:u=`headlessui-menu-item-${t}`,disabled:o=!1,...r}=e,[i,a]=$("Menu.Item"),s=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===u:!1,m=c.useRef(null),v=E(n,m);S(()=>{if(i.__demoMode||i.menuState!==0||!s||i.activationTrigger===0)return;let p=A();return p.requestAnimationFrame(()=>{var k,O;(O=(k=m.current)==null?void 0:k.scrollIntoView)==null||O.call(k,{block:"nearest"})}),p.dispose},[i.__demoMode,m,s,i.menuState,i.activationTrigger,i.activeItemIndex]);let y=ce(m),g=c.useRef({disabled:o,domRef:m,get textValue(){return y()}});S(()=>{g.current.disabled=o},[g,o]),S(()=>(a({type:5,id:u,dataRef:g}),()=>a({type:6,id:u})),[g,u]);let x=I(()=>{a({type:1})}),h=I(p=>{if(o)return p.preventDefault();a({type:1}),W(i.buttonRef.current)}),f=I(()=>{if(o)return a({type:2,focus:b.Nothing});a({type:2,focus:b.Specific,id:u})}),R=ae(),M=I(p=>R.update(p)),l=I(p=>{R.wasMoved(p)&&(o||s||a({type:2,focus:b.Specific,id:u,trigger:0}))}),D=I(p=>{R.wasMoved(p)&&(o||s&&a({type:2,focus:b.Nothing}))}),F=c.useMemo(()=>({active:s,disabled:o,close:x}),[s,o,x]);return w({ourProps:{id:u,ref:v,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:f,onPointerEnter:M,onMouseEnter:M,onPointerMove:l,onMouseMove:l,onPointerLeave:D,onMouseLeave:D},theirProps:r,slot:F,defaultTag:Se,name:"Menu.Item"})}let Me=T(ge),Fe=T(ye),Pe=T(he),Te=T(De),$e=Object.assign(Me,{Button:Fe,Items:Pe,Item:Te});export{$e as q};
