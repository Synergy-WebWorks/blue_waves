import{r as a,b as w,j as P}from"./app-DRFUdDrs.js";import{e as ye,N as Pe,E as xe,n as pe,u as ne,a as re,y as ge,s as R}from"./use-root-containers-aqQ64y5i.js";import{O as X,U as W,y as K,T as Se,n as oe,A as ae,s as de,b as E,j as he,c as Ee,u as L,d as U,C as V,I as q,e as fe,B as $e,l as Ie,f as G,M as _,w as Ne,x as we,k as A,r as ve,q as Te,N as le}from"./keyboard-yUix70vX.js";import{T as Ce}from"./use-resolve-button-type-DLn3ZNoC.js";var ke=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ke||{}),Me=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Me||{});let Oe={0:e=>{let n={...e,popoverState:L(e.popoverState,{0:1,1:0})};return n.popoverState===0&&(n.__demoMode=!1),n},1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,n){return e.button===n.button?e:{...e,button:n.button}},3(e,n){return e.buttonId===n.buttonId?e:{...e,buttonId:n.buttonId}},4(e,n){return e.panel===n.panel?e:{...e,panel:n.panel}},5(e,n){return e.panelId===n.panelId?e:{...e,panelId:n.panelId}}},ue=a.createContext(null);ue.displayName="PopoverContext";function Z(e){let n=a.useContext(ue);if(n===null){let d=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,Z),d}return n}let se=a.createContext(null);se.displayName="PopoverAPIContext";function ie(e){let n=a.useContext(se);if(n===null){let d=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,ie),d}return n}let ce=a.createContext(null);ce.displayName="PopoverGroupContext";function me(){return a.useContext(ce)}let ee=a.createContext(null);ee.displayName="PopoverPanelContext";function je(){return a.useContext(ee)}function Be(e,n){return L(n.type,Oe,e,n)}let Fe="div";function De(e,n){var d;let{__demoMode:y=!1,...x}=e,l=a.useRef(null),t=K(n,Se(u=>{l.current=u})),s=a.useRef([]),b=a.useReducer(Be,{__demoMode:y,popoverState:y?0:1,buttons:s,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:a.createRef(),afterPanelSentinel:a.createRef()}),[{popoverState:g,button:c,buttonId:$,panel:o,panelId:F,beforePanelSentinel:C,afterPanelSentinel:S},i]=b,v=oe((d=l.current)!=null?d:c),T=a.useMemo(()=>{if(!c||!o)return!1;for(let Q of document.querySelectorAll("body > *"))if(Number(Q==null?void 0:Q.contains(c))^Number(Q==null?void 0:Q.contains(o)))return!0;let u=ae(),k=u.indexOf(c),Y=(k+u.length-1)%u.length,H=(k+1)%u.length,J=u[Y],be=u[H];return!o.contains(J)&&!o.contains(be)},[c,o]),M=de($),j=de(F),B=a.useMemo(()=>({buttonId:M,panelId:j,close:()=>i({type:1})}),[M,j,i]),O=me(),D=O==null?void 0:O.registerPopover,p=E(()=>{var u;return(u=O==null?void 0:O.isFocusWithinPopoverGroup())!=null?u:(v==null?void 0:v.activeElement)&&((c==null?void 0:c.contains(v.activeElement))||(o==null?void 0:o.contains(v.activeElement)))});a.useEffect(()=>D==null?void 0:D(B),[D,B]);let[I,m]=ye(),r=Pe({mainTreeNodeRef:O==null?void 0:O.mainTreeNodeRef,portals:I,defaultContainers:[c,o]});xe(v==null?void 0:v.defaultView,"focus",u=>{var k,Y,H,J;u.target!==window&&u.target instanceof HTMLElement&&g===0&&(p()||c&&o&&(r.contains(u.target)||(Y=(k=C.current)==null?void 0:k.contains)!=null&&Y.call(k,u.target)||(J=(H=S.current)==null?void 0:H.contains)!=null&&J.call(H,u.target)||i({type:1})))},!0),he(r.resolveContainers,(u,k)=>{i({type:1}),Ne(k,we.Loose)||(u.preventDefault(),c==null||c.focus())},g===0);let f=E(u=>{i({type:1});let k=u?u instanceof HTMLElement?u:"current"in u&&u.current instanceof HTMLElement?u.current:c:c;k==null||k.focus()}),N=a.useMemo(()=>({close:f,isPortalled:T}),[f,T]),h=a.useMemo(()=>({open:g===0,close:f}),[g,f]),z={ref:t};return w.createElement(ee.Provider,{value:null},w.createElement(ue.Provider,{value:b},w.createElement(se.Provider,{value:N},w.createElement(Ee,{value:L(g,{0:U.Open,1:U.Closed})},w.createElement(m,null,V({ourProps:z,theirProps:x,slot:h,defaultTag:Fe,name:"Popover"}),w.createElement(r.MainTreeNode,null))))))}let Re="button";function _e(e,n){let d=q(),{id:y=`headlessui-popover-button-${d}`,...x}=e,[l,t]=Z("Popover.Button"),{isPortalled:s}=ie("Popover.Button"),b=a.useRef(null),g=`headlessui-focus-sentinel-${q()}`,c=me(),$=c==null?void 0:c.closeOthers,o=je()!==null;a.useEffect(()=>{if(!o)return t({type:3,buttonId:y}),()=>{t({type:3,buttonId:null})}},[o,y,t]);let[F]=a.useState(()=>Symbol()),C=K(b,n,o?null:r=>{if(r)l.buttons.current.push(F);else{let f=l.buttons.current.indexOf(F);f!==-1&&l.buttons.current.splice(f,1)}l.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),r&&t({type:2,button:r})}),S=K(b,n),i=oe(b),v=E(r=>{var f,N,h;if(o){if(l.popoverState===1)return;switch(r.key){case A.Space:case A.Enter:r.preventDefault(),(N=(f=r.target).click)==null||N.call(f),t({type:1}),(h=l.button)==null||h.focus();break}}else switch(r.key){case A.Space:case A.Enter:r.preventDefault(),r.stopPropagation(),l.popoverState===1&&($==null||$(l.buttonId)),t({type:0});break;case A.Escape:if(l.popoverState!==0)return $==null?void 0:$(l.buttonId);if(!b.current||i!=null&&i.activeElement&&!b.current.contains(i.activeElement))return;r.preventDefault(),r.stopPropagation(),t({type:1});break}}),T=E(r=>{o||r.key===A.Space&&r.preventDefault()}),M=E(r=>{var f,N;ve(r.currentTarget)||e.disabled||(o?(t({type:1}),(f=l.button)==null||f.focus()):(r.preventDefault(),r.stopPropagation(),l.popoverState===1&&($==null||$(l.buttonId)),t({type:0}),(N=l.button)==null||N.focus()))}),j=E(r=>{r.preventDefault(),r.stopPropagation()}),B=l.popoverState===0,O=a.useMemo(()=>({open:B}),[B]),D=Ce(e,b),p=o?{ref:S,type:D,onKeyDown:v,onClick:M}:{ref:C,id:l.buttonId,type:D,"aria-expanded":l.popoverState===0,"aria-controls":l.panel?l.panelId:void 0,onKeyDown:v,onKeyUp:T,onClick:M,onMouseDown:j},I=pe(),m=E(()=>{let r=l.panel;if(!r)return;function f(){L(I.current,{[R.Forwards]:()=>G(r,_.First),[R.Backwards]:()=>G(r,_.Last)})===le.Error&&G(ae().filter(N=>N.dataset.headlessuiFocusGuard!=="true"),L(I.current,{[R.Forwards]:_.Next,[R.Backwards]:_.Previous}),{relativeTo:l.button})}f()});return w.createElement(w.Fragment,null,V({ourProps:p,theirProps:x,slot:O,defaultTag:Re,name:"Popover.Button"}),B&&!o&&s&&w.createElement(ne,{id:g,features:re.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:m}))}let Ae="div",Ge=X.RenderStrategy|X.Static;function Le(e,n){let d=q(),{id:y=`headlessui-popover-overlay-${d}`,...x}=e,[{popoverState:l},t]=Z("Popover.Overlay"),s=K(n),b=fe(),g=b!==null?(b&U.Open)===U.Open:l===0,c=E(o=>{if(ve(o.currentTarget))return o.preventDefault();t({type:1})}),$=a.useMemo(()=>({open:l===0}),[l]);return V({ourProps:{ref:s,id:y,"aria-hidden":!0,onClick:c},theirProps:x,slot:$,defaultTag:Ae,features:Ge,visible:g,name:"Popover.Overlay"})}let qe="div",Ke=X.RenderStrategy|X.Static;function Ue(e,n){let d=q(),{id:y=`headlessui-popover-panel-${d}`,focus:x=!1,...l}=e,[t,s]=Z("Popover.Panel"),{close:b,isPortalled:g}=ie("Popover.Panel"),c=`headlessui-focus-sentinel-before-${q()}`,$=`headlessui-focus-sentinel-after-${q()}`,o=a.useRef(null),F=K(o,n,p=>{s({type:4,panel:p})}),C=oe(o),S=$e();Ie(()=>(s({type:5,panelId:y}),()=>{s({type:5,panelId:null})}),[y,s]);let i=fe(),v=i!==null?(i&U.Open)===U.Open:t.popoverState===0,T=E(p=>{var I;switch(p.key){case A.Escape:if(t.popoverState!==0||!o.current||C!=null&&C.activeElement&&!o.current.contains(C.activeElement))return;p.preventDefault(),p.stopPropagation(),s({type:1}),(I=t.button)==null||I.focus();break}});a.useEffect(()=>{var p;e.static||t.popoverState===1&&((p=e.unmount)==null||p)&&s({type:4,panel:null})},[t.popoverState,e.unmount,e.static,s]),a.useEffect(()=>{if(t.__demoMode||!x||t.popoverState!==0||!o.current)return;let p=C==null?void 0:C.activeElement;o.current.contains(p)||G(o.current,_.First)},[t.__demoMode,x,o,t.popoverState]);let M=a.useMemo(()=>({open:t.popoverState===0,close:b}),[t,b]),j={ref:F,id:y,onKeyDown:T,onBlur:x&&t.popoverState===0?p=>{var I,m,r,f,N;let h=p.relatedTarget;h&&o.current&&((I=o.current)!=null&&I.contains(h)||(s({type:1}),((r=(m=t.beforePanelSentinel.current)==null?void 0:m.contains)!=null&&r.call(m,h)||(N=(f=t.afterPanelSentinel.current)==null?void 0:f.contains)!=null&&N.call(f,h))&&h.focus({preventScroll:!0})))}:void 0,tabIndex:-1},B=pe(),O=E(()=>{let p=o.current;if(!p)return;function I(){L(B.current,{[R.Forwards]:()=>{var m;G(p,_.First)===le.Error&&((m=t.afterPanelSentinel.current)==null||m.focus())},[R.Backwards]:()=>{var m;(m=t.button)==null||m.focus({preventScroll:!0})}})}I()}),D=E(()=>{let p=o.current;if(!p)return;function I(){L(B.current,{[R.Forwards]:()=>{var m;if(!t.button)return;let r=ae(),f=r.indexOf(t.button),N=r.slice(0,f+1),h=[...r.slice(f+1),...N];for(let z of h.slice())if(z.dataset.headlessuiFocusGuard==="true"||(m=t.panel)!=null&&m.contains(z)){let u=h.indexOf(z);u!==-1&&h.splice(u,1)}G(h,_.First,{sorted:!1})},[R.Backwards]:()=>{var m;G(p,_.Previous)===le.Error&&((m=t.button)==null||m.focus())}})}I()});return w.createElement(ee.Provider,{value:y},v&&g&&w.createElement(ne,{id:c,ref:t.beforePanelSentinel,features:re.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:O}),V({mergeRefs:S,ourProps:j,theirProps:l,slot:M,defaultTag:qe,features:Ke,visible:v,name:"Popover.Panel"}),v&&g&&w.createElement(ne,{id:$,ref:t.afterPanelSentinel,features:re.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:D}))}let ze="div";function He(e,n){let d=a.useRef(null),y=K(d,n),[x,l]=a.useState([]),t=ge(),s=E(S=>{l(i=>{let v=i.indexOf(S);if(v!==-1){let T=i.slice();return T.splice(v,1),T}return i})}),b=E(S=>(l(i=>[...i,S]),()=>s(S))),g=E(()=>{var S;let i=Te(d);if(!i)return!1;let v=i.activeElement;return(S=d.current)!=null&&S.contains(v)?!0:x.some(T=>{var M,j;return((M=i.getElementById(T.buttonId.current))==null?void 0:M.contains(v))||((j=i.getElementById(T.panelId.current))==null?void 0:j.contains(v))})}),c=E(S=>{for(let i of x)i.buttonId.current!==S&&i.close()}),$=a.useMemo(()=>({registerPopover:b,unregisterPopover:s,isFocusWithinPopoverGroup:g,closeOthers:c,mainTreeNodeRef:t.mainTreeNodeRef}),[b,s,g,c,t.mainTreeNodeRef]),o=a.useMemo(()=>({}),[]),F=e,C={ref:y};return w.createElement(ce.Provider,{value:$},V({ourProps:C,theirProps:F,slot:o,defaultTag:ze,name:"Popover.Group"}),w.createElement(t.MainTreeNode,null))}let We=W(De),Ve=W(_e),Ye=W(Le),Je=W(Ue),Qe=W(He),te=Object.assign(We,{Button:Ve,Overlay:Ye,Panel:Je,Group:Qe});function nt(){const[e,n]=a.useState(1),[d,y]=a.useState(0),x=t=>{t==="adults"&&n(s=>s+1),t==="children"&&y(s=>s+1)},l=t=>{t==="adults"&&e>1&&n(s=>s-1),t==="children"&&d>0&&y(s=>s-1)};return P.jsxs(te,{className:"relative",children:[P.jsx(te.Button,{className:"inline-flex items-center gap-x-1 text-sm font-semibold",children:P.jsx("input",{readOnly:!0,type:"text",value:`${e} Adult${e>1?"s":""} | ${d} Children`,className:"rounded-lg border border-gray-300 px-4 py-2 text-center text-gray-500 cursor-pointer"})}),P.jsxs(te.Panel,{className:"absolute left-1/2 z-10 mt-3 w-72 -translate-x-1/2 bg-white rounded-lg shadow-lg ring-1 ring-teal-900/5 p-4",children:[P.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Guest Selection"}),P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsx("label",{className:"text-gray-700",children:"Adults:"}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("button",{onClick:()=>l("adults"),className:"px-3 py-1 bg-gray-200 text-gray-700 rounded",children:"-"}),P.jsx("input",{type:"text",value:e,readOnly:!0,className:"w-10 text-center border border-gray-300 rounded"}),P.jsx("button",{onClick:()=>x("adults"),className:"px-3 py-1 bg-teal-600 text-white rounded",children:"+"})]})]}),P.jsxs("div",{className:"flex justify-between items-center",children:[P.jsx("label",{className:"text-gray-700",children:"Children:"}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("button",{onClick:()=>l("children"),className:"px-3 py-1 bg-gray-200 text-gray-700 rounded",children:"-"}),P.jsx("input",{type:"text",value:d,readOnly:!0,className:"w-10 text-center border border-gray-300 rounded"}),P.jsx("button",{onClick:()=>x("children"),className:"px-3 py-1 bg-teal-600 text-white rounded",children:"+"})]})]})]})]})}export{nt as default};
