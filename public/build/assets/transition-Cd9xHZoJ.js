import{r as s,k as E}from"./app-CBuwA0R4.js";import{p as te}from"./use-disposables-L9rLOV79.js";import{u as C,d as Y,s as D,l as K,U as _,y as ne,a as le,f as ae,g as $,o as w,C as se,v as L,j as ee,k as pe,e as he}from"./keyboard-C1p5MTij.js";import{f as J}from"./dialog-CoyanWYz.js";function ge(r=0){let[e,t]=s.useState(r),a=J(),f=s.useCallback(i=>{a.current&&t(n=>n|i)},[e,a]),p=s.useCallback(i=>!!(e&i),[e]),v=s.useCallback(i=>{a.current&&t(n=>n&~i)},[t,a]),c=s.useCallback(i=>{a.current&&t(n=>n^i)},[t]);return{flags:e,addFlag:f,hasFlag:p,removeFlag:v,toggleFlag:c}}function be(r){let e={called:!1};return(...t)=>{if(!e.called)return e.called=!0,r(...t)}}function z(r,...e){r&&e.length>0&&r.classList.add(...e)}function G(r,...e){r&&e.length>0&&r.classList.remove(...e)}function Ee(r,e){let t=Y();if(!r)return t.dispose;let{transitionDuration:a,transitionDelay:f}=getComputedStyle(r),[p,v]=[a,f].map(i=>{let[n=0]=i.split(",").filter(Boolean).map(o=>o.includes("ms")?parseFloat(o):parseFloat(o)*1e3).sort((o,g)=>g-o);return n}),c=p+v;if(c!==0){t.group(n=>{n.setTimeout(()=>{e(),n.dispose()},c),n.addEventListener(r,"transitionrun",o=>{o.target===o.currentTarget&&n.dispose()})});let i=t.addEventListener(r,"transitionend",n=>{n.target===n.currentTarget&&(e(),i())})}else e();return t.add(()=>e()),t.dispose}function Te(r,e,t,a){let f=t?"enter":"leave",p=Y(),v=a!==void 0?be(a):()=>{};f==="enter"&&(r.removeAttribute("hidden"),r.style.display="");let c=C(f,{enter:()=>e.enter,leave:()=>e.leave}),i=C(f,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),n=C(f,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return G(r,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),z(r,...e.base,...c,...n),p.nextFrame(()=>{G(r,...e.base,...c,...n),z(r,...e.base,...c,...i),Ee(r,()=>(G(r,...e.base,...c),z(r,...e.base,...e.entered),v()))}),p.dispose}function Fe({immediate:r,container:e,direction:t,classes:a,onStart:f,onStop:p}){let v=J(),c=te(),i=D(t);K(()=>{r&&(i.current="enter")},[r]),K(()=>{let n=Y();c.add(n.dispose);let o=e.current;if(o&&i.current!=="idle"&&v.current)return n.dispose(),f.current(i.current),n.add(Te(o,a.current,i.current==="enter",()=>{n.dispose(),p.current(i.current)})),n.dispose},[t])}function F(r=""){return r.split(/\s+/).filter(e=>e.length>1)}let M=s.createContext(null);M.displayName="TransitionContext";var $e=(r=>(r.Visible="visible",r.Hidden="hidden",r))($e||{});function Ce(){let r=s.useContext(M);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}function we(){let r=s.useContext(q);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}let q=s.createContext(null);q.displayName="NestingContext";function A(r){return"children"in r?A(r.children):r.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function ie(r,e){let t=D(r),a=s.useRef([]),f=J(),p=te(),v=w((m,u=L.Hidden)=>{let d=a.current.findIndex(({el:l})=>l===m);d!==-1&&(C(u,{[L.Unmount](){a.current.splice(d,1)},[L.Hidden](){a.current[d].state="hidden"}}),p.microTask(()=>{var l;!A(a)&&f.current&&((l=t.current)==null||l.call(t))}))}),c=w(m=>{let u=a.current.find(({el:d})=>d===m);return u?u.state!=="visible"&&(u.state="visible"):a.current.push({el:m,state:"visible"}),()=>v(m,L.Unmount)}),i=s.useRef([]),n=s.useRef(Promise.resolve()),o=s.useRef({enter:[],leave:[],idle:[]}),g=w((m,u,d)=>{i.current.splice(0),e&&(e.chains.current[u]=e.chains.current[u].filter(([l])=>l!==m)),e==null||e.chains.current[u].push([m,new Promise(l=>{i.current.push(l)})]),e==null||e.chains.current[u].push([m,new Promise(l=>{Promise.all(o.current[u].map(([S,N])=>N)).then(()=>l())})]),u==="enter"?n.current=n.current.then(()=>e==null?void 0:e.wait.current).then(()=>d(u)):d(u)}),b=w((m,u,d)=>{Promise.all(o.current[u].splice(0).map(([l,S])=>S)).then(()=>{var l;(l=i.current.shift())==null||l()}).then(()=>d(u))});return s.useMemo(()=>({children:a,register:c,unregister:v,onStart:g,onStop:b,wait:n,chains:o}),[c,v,a,g,b,o,n])}function Re(){}let xe=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function re(r){var e;let t={};for(let a of xe)t[a]=(e=r[a])!=null?e:Re;return t}function Le(r){let e=s.useRef(re(r));return s.useEffect(()=>{e.current=re(r)},[r]),e}let Se="div",ue=he.RenderStrategy;function Ne(r,e){var t,a;let{beforeEnter:f,afterEnter:p,beforeLeave:v,afterLeave:c,enter:i,enterFrom:n,enterTo:o,entered:g,leave:b,leaveFrom:m,leaveTo:u,...d}=r,l=s.useRef(null),S=ne(l,e),N=(t=d.unmount)==null||t?L.Unmount:L.Hidden,{show:h,appear:R,initial:W}=Ce(),[x,B]=s.useState(h?"visible":"hidden"),X=we(),{register:O,unregister:k}=X;s.useEffect(()=>O(l),[O,l]),s.useEffect(()=>{if(N===L.Hidden&&l.current){if(h&&x!=="visible"){B("visible");return}return C(x,{hidden:()=>k(l),visible:()=>O(l)})}},[x,l,O,k,h,N]);let j=D({base:F(d.className),enter:F(i),enterFrom:F(n),enterTo:F(o),entered:F(g),leave:F(b),leaveFrom:F(m),leaveTo:F(u)}),H=Le({beforeEnter:f,afterEnter:p,beforeLeave:v,afterLeave:c}),I=le();s.useEffect(()=>{if(I&&x==="visible"&&l.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[l,x,I]);let ce=W&&!R,Z=R&&h&&W,de=!I||ce?"idle":h?"enter":"leave",y=ge(0),fe=w(T=>C(T,{enter:()=>{y.addFlag($.Opening),H.current.beforeEnter()},leave:()=>{y.addFlag($.Closing),H.current.beforeLeave()},idle:()=>{}})),ve=w(T=>C(T,{enter:()=>{y.removeFlag($.Opening),H.current.afterEnter()},leave:()=>{y.removeFlag($.Closing),H.current.afterLeave()},idle:()=>{}})),U=ie(()=>{B("hidden"),k(l)},X),V=s.useRef(!1);Fe({immediate:Z,container:l,classes:j,direction:de,onStart:D(T=>{V.current=!0,U.onStart(l,T,fe)}),onStop:D(T=>{V.current=!1,U.onStop(l,T,ve),T==="leave"&&!A(U)&&(B("hidden"),k(l))})});let P=d,me={ref:S};return Z?P={...P,className:ee(d.className,...j.current.enter,...j.current.enterFrom)}:V.current&&(P.className=ee(d.className,(a=l.current)==null?void 0:a.className),P.className===""&&delete P.className),E.createElement(q.Provider,{value:U},E.createElement(pe,{value:C(x,{visible:$.Open,hidden:$.Closed})|y.flags},se({ourProps:me,theirProps:P,defaultTag:Se,features:ue,visible:x==="visible",name:"Transition.Child"})))}function Pe(r,e){let{show:t,appear:a=!1,unmount:f=!0,...p}=r,v=s.useRef(null),c=ne(v,e);le();let i=ae();if(t===void 0&&i!==null&&(t=(i&$.Open)===$.Open),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[n,o]=s.useState(t?"visible":"hidden"),g=ie(()=>{o("hidden")}),[b,m]=s.useState(!0),u=s.useRef([t]);K(()=>{b!==!1&&u.current[u.current.length-1]!==t&&(u.current.push(t),m(!1))},[u,t]);let d=s.useMemo(()=>({show:t,appear:a,initial:b}),[t,a,b]);s.useEffect(()=>{if(t)o("visible");else if(!A(g))o("hidden");else{let h=v.current;if(!h)return;let R=h.getBoundingClientRect();R.x===0&&R.y===0&&R.width===0&&R.height===0&&o("hidden")}},[t,g]);let l={unmount:f},S=w(()=>{var h;b&&m(!1),(h=r.beforeEnter)==null||h.call(r)}),N=w(()=>{var h;b&&m(!1),(h=r.beforeLeave)==null||h.call(r)});return E.createElement(q.Provider,{value:g},E.createElement(M.Provider,{value:d},se({ourProps:{...l,as:s.Fragment,children:E.createElement(oe,{ref:c,...l,...p,beforeEnter:S,beforeLeave:N})},theirProps:{},defaultTag:s.Fragment,features:ue,visible:n==="visible",name:"Transition"})))}function ye(r,e){let t=s.useContext(M)!==null,a=ae()!==null;return E.createElement(E.Fragment,null,!t&&a?E.createElement(Q,{ref:e,...r}):E.createElement(oe,{ref:e,...r}))}let Q=_(Pe),oe=_(Ne),De=_(ye),Me=Object.assign(Q,{Child:De,Root:Q});export{Me as q};
