import{u as g,r as i,j as e,s as d}from"./app-Ck3xjUez.js";import{r as h,g as y}from"./inventory-thunk-BRofw1BV.js";import{u as v}from"./index-Dn55StTk.js";import{s as m}from"./index-BisOOpj5.js";import{T as j,M as N}from"./index-BNKcKgSS.js";import"./asyncToGenerator-WaIgFzxQ.js";import"./UnstableContext-CO8c9kvN.js";import"./index-DXTWI4L6.js";import"./colors-DolnGSyb.js";function D({data:l}){const{inventories:c}=g(r=>r.inventories),[f,s]=i.useState(!1),[t,a]=i.useState({}),[o,p]=m.useMessage();i.useEffect(()=>{a(l)},[l]);const x=async r=>{if(r.preventDefault(),!t.quantity||isNaN(t.quantity)||t.quantity<=0){o.error("Please enter a valid quantity");return}if(!t.received){o.error("Please select a valid received date");return}try{const n={...t,returned:t.quantity};if(!n.id){o.error("Item ID is missing!");return}await d.dispatch(h(n)),await d.dispatch(y()),m.success("Item Returned Successfully"),s(!1)}catch{o.error("Error returning item")}};console.log("inventories",c);const u=c.filter(r=>r.type==="Non-Consumable");return e.jsxs("div",{children:[p,e.jsx(j,{title:"Return Item(s)",children:e.jsxs("button",{type:"button",onClick:()=>s(!0),title:"Add Stocks",className:"relative inline-flex items-center rounded-lg bg-green-600 px-3 py-2 text-sm font-semibold text-gray-300 ring-1 ring-gray-300 ring-inset hover:bg-green-500 focus:z-10",children:[e.jsx(v,{}),"Â Return Item"]})}),e.jsx(N,{title:"Return Item",centered:!0,open:f,onCancel:()=>s(!1),footer:null,width:500,children:e.jsxs("form",{onSubmit:x,className:"w-full",children:[e.jsx("div",{className:"flex flex-wrap -mx-3",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block tracking-wide font-bold mb-1 mt-2",htmlFor:"itemName",children:"Name of Item"}),e.jsxs("select",{value:(t==null?void 0:t.id)||"",onChange:r=>{const n=u.find(b=>b.id===parseInt(r.target.value));a({...t,id:n==null?void 0:n.id,itemName:n==null?void 0:n.name})},name:"itemName",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Item"}),u.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]})}),e.jsx("div",{className:"flex flex-wrap -mx-3",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block tracking-wide font-bold mb-1 mt-2",htmlFor:"quantity",children:"Number of Returned Item(s)"}),e.jsx("input",{value:(t==null?void 0:t.quantity)||"",onChange:r=>a({...t,quantity:parseInt(r.target.value,10)||0}),name:"quantity",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"number"})]})}),e.jsx("div",{className:"flex flex-wrap -mx-3 mb-6",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block tracking-wide font-bold mb-1",htmlFor:"received",children:"Date Returned"}),e.jsx("input",{value:(t==null?void 0:t.received)||"",onChange:r=>a({...t,received:r.target.value}),name:"received",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"date"})]})}),e.jsxs("div",{className:"flex justify-end gap-1.5 mt-1",children:[e.jsx("button",{type:"button",className:"flex justify-end px-2 py-1.5 rounded-md hover:bg-gray-300",onClick:()=>s(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex justify-end bg-blue-600 px-2 py-1.5 rounded-md text-white hover:bg-blue-500",children:"Return Item(s)"})]})]})})]})}export{D as default};
